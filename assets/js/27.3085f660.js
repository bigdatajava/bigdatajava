(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{368:function(t,e,s){"use strict";s.r(e);var a=s(1),r=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"执行计划explain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行计划explain"}},[t._v("#")]),t._v(" 执行计划explain")]),t._v(" "),e("h2",{attrs:{id:"设计到的最重要字段"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设计到的最重要字段"}},[t._v("#")]),t._v(" 设计到的最重要字段")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("id,\nselect_type,\nkey，\nrows，\nExtra\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("h3",{attrs:{id:"id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[t._v("#")]),t._v(" id")]),t._v(" "),e("p",[t._v("select查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序,")]),t._v(" "),e("p",[t._v("id的序号会递增，id值越大优先级越高，越先被执行")]),t._v(" "),e("h3",{attrs:{id:"select-type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#select-type"}},[t._v("#")]),t._v(" select_type")]),t._v(" "),e("p",[t._v("查询的类型，主要是用于区分普通查询、联合查询、子查询等复杂的查询")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("SIMPLE")]),t._v(" "),e("th",[t._v("简单的select查询，查询中不包含子查询或者union")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("PRIMARY")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("SUBQUERY")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("DERIVED")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("UNION")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("UNION RESULT")])]),t._v(" "),e("td")])])]),t._v(" "),e("h3",{attrs:{id:"type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),e("p",[t._v("访问类型，sql查询优化中一个很重要的指标，结果值从好到坏依次是：")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("system > const > eq_ref > ref > fulltext > ref_or_null > index_merge > unique_subquery > index_subquery > range > index > ALL\n\n一般来说，好的sql查询至少达到range级别，最好能达到ref\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h3",{attrs:{id:"possible-keys"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#possible-keys"}},[t._v("#")]),t._v(" possible_keys")]),t._v(" "),e("p",[t._v("查询涉及到的字段上存在索引，则该索引将被列出，但不一定被查询实际使用")]),t._v(" "),e("h3",{attrs:{id:"key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[t._v("#")]),t._v(" key")]),t._v(" "),e("p",[t._v("实际使用的索引，如果为NULL，则没有使用索引。\n查询中如果使用了覆盖索引，则该索引仅出现在key列表中")]),t._v(" "),e("h3",{attrs:{id:"key-len"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#key-len"}},[t._v("#")]),t._v(" key_len")]),t._v(" "),e("p",[t._v("表示索引中使用的字节数，查询中使用的索引的长度（最大可能长度），并非实际使用长度，理论上长度越短越好。key_len是根据表定义计算而得的，不是通过表内检索出的")]),t._v(" "),e("h3",{attrs:{id:"ref"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ref"}},[t._v("#")]),t._v(" ref")]),t._v(" "),e("p",[t._v("显示索引的那一列被使用了，如果可能，是一个常量const。")]),t._v(" "),e("h3",{attrs:{id:"rows"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rows"}},[t._v("#")]),t._v(" rows")]),t._v(" "),e("p",[t._v("根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数")]),t._v(" "),e("h3",{attrs:{id:"extra"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extra"}},[t._v("#")]),t._v(" Extra")]),t._v(" "),e("p",[t._v("不适合在其他字段中显示，但是十分重要的额外信息")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("Using filesort")])]),t._v(" "),e("th")])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("strong",[t._v("Using temporary")])]),t._v(" "),e("td",[t._v("使用临时表保存中间结果，也就是说mysql在对查询结果排序时使用了临时表，常见于order by 和 group by")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("Using index")])]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("Using where")]),t._v(" "),e("td",[t._v("使用了where过滤")])]),t._v(" "),e("tr",[e("td",[t._v("Using join buffer")]),t._v(" "),e("td",[t._v("使用了链接缓存")])]),t._v(" "),e("tr",[e("td",[t._v("Impossible WHERE")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("select tables optimized away")]),t._v(" "),e("td",[t._v("在没有group by子句的情况下，基于索引优化MIN/MAX操作或者对于MyISAM存储引擎优化COUNT（*）操作，不必等到执行阶段在进行计算，查询执行计划生成的阶段即可完成优化")])]),t._v(" "),e("tr",[e("td",[t._v("distinct")]),t._v(" "),e("td",[t._v("优化distinct操作，在找到第一个匹配的元祖后即停止找同样值得动作")])])])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("覆盖索引（Covering Index）：也叫索引覆盖。就是select列表中的字段，只用从索引中就能获取，不必根据索引再次读取数据文件，换句话说查询列要被所建的索引覆盖。 \n注意： \na、如需使用覆盖索引，select列表中的字段只取出需要的列，不要使用select * \nb、如果将所有字段都建索引会导致索引文件过大，反而降低crud性能\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("p",[t._v("著作权声明：本文首次发布于 "),e("a",{attrs:{href:"https://liuwc.xyz",target:"_blank",rel:"noopener noreferrer"}},[t._v("刘自超"),e("OutboundLink")],1),t._v("，转载请保留以上链接")])])}),[],!1,null,null,null);e.default=r.exports}}]);