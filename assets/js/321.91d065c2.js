(window.webpackJsonp=window.webpackJsonp||[]).push([[321],{665:function(a,s,n){"use strict";n.r(s);var e=n(1),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"wrapper-config参数详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wrapper-config参数详解"}},[a._v("#")]),a._v(" wrapper.config参数详解")]),a._v(" "),s("p",[a._v("官网解析："),s("code",[a._v("https://wrapper.tanukisoftware.com/doc/english/properties.html")])]),a._v(" "),s("p",[a._v("将一个简单的程度如HelloWorld 的应用包装秤Wrapper 服务并不复杂，甚至可以认为非常简单。但是实际项目应用过程中我们的程序一般较庞大，运行环境也较复杂。")]),a._v(" "),s("p",[a._v("​    通过Wrapper 配置文件的分析与配置进一步了解构建Wrapper 服务需要注意的关键点及重要部分。")]),a._v(" "),s("p",[a._v("首先，打开conf 文件夹下的wrapper.conf配置文件，此配置文件时Wrapper 的主配置文件也是关键配置文件，下面开始一项一项的开始分析。")]),a._v(" "),s("p",[a._v("​    "),s("strong",[a._v("1.文件编码及子配置文件")]),a._v("\n​    文件头部包含了配置文件编码格式，子配置文件等相关信息，如下所示：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('#文件编码，每个配置文件起始位置必须指定该文件的编码格式\nencoding=UTF-8\n\n# 如果包含配置文件出现问题可以使用debug调试模式，去掉一个"#"，格式为#include.debug\n#include.debug\n\n# 包含子配置文件，可以是配置信息也可以是许可信息\ninclude ../conf/wrapper-license.conf\ninclude ../conf/wrapper2.conf\n\n# 是否开启许可文件debug模式\nwrapper.license.debug=TRUE\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[a._v("​    通过子配置文件的配置可以使主配置文件关联最多10级子配置，例如：wrapper.conf 包含 wrapper2.conf ，wrapper2.conf 包含wrapper3.conf ..... wrapper9.conf 包含wrapper10.conf，文件结构如下：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("wrapper.conf\n  |-wrapper2.conf\n    |-wrapper3.conf\n          .....\n      |-wrapper9.conf\n        |-wrapper10.conf\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("​    也就是说配置文件嵌套层级最大可达10级，引用一张官方图片可以很好的说明：")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://img0.tuicool.com/UNrMrm.png",alt:"img"}}),a._v("\n如果子配置文件不存在时，那么它将被忽略，不会导致程序运行错误。")]),a._v(" "),s("p",[a._v("​    "),s("strong",[a._v("2.Wrapper 语言设置")])]),a._v(" "),s("p",[a._v("​    通过这两项的设置可以指定Wrapper 的语言种类，可以在Wrapper 官网下到这些语言包支持，目前不支持中文。")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 指定Wrapper语言，默认使用系统语言\nwrapper.lang=en_US\n\n#指定Wrapper 语言资源位置，如果该文件不存在则默认设置为en_US\nwrapper.lang.folder=../lang\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("3.Wrapper Java 相关属性配置")])]),a._v(" "),s("p",[a._v("​    "),s("strong",[a._v("(1)java运行环境设置")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Java 程序配置：\n#   (1)默认使用PATH环境变量配置信息则使用下列配置形式\nwrapper.java.command=java\n\n#   (2)如果想单独配置运行程序，则可采用此种配置方式\nset.JAVA_HOME=/java/path\nwrapper.java.command=%JAVA_HOME%/bin/java\n\n# java程序日志级别\nwrapper.java.command.loglevel=INFO\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("(2)程序入口")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Java Main class，也就是程序入口  \n#该类需要实现WrapperListener 接口并保证WrapperManager 得到初始化(调用WrapperManager.start(WrapperListener listener, String[] args) 方法)。\nwrapper.java.mainclass=com.helloworld.hello.HelloWorld\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("(3)类库设置")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# Java Classpath配置，必须从序号"1"开始，添加新的jar包后序号递增\nwrapper.java.classpath.1=../lib/wrapper.jar\nwrapper.java.classpath.2=../lib/hello.jar\n\n# Java 类库路径 (Wrapper.DLL 或 libwrapper.so 依赖文件的存放位置)\nwrapper.java.library.path.1=../lib\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("(4)JVM相关配置")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 32/64位选择，true为自动选择\nwrapper.java.additional.auto_bits=TRUE\n\n# Java附加参数\nwrapper.java.additional.1=\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("​    附加参数即为java命令可选参数，如下所示：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('-d32          use a 32-bit data model if available\n\n-d64          use a 64-bit data model if available\n-server\t  to select the "server" VM\n    The default VM is server.\n    \n-cp <class search path of directories and zip/jar files>\n-classpath <class search path of directories and zip/jar files>\n    A : separated list of directories, JAR archives,\n    and ZIP archives to search for class files.\n-D<name>=<value>\n    set a system property\n-verbose[:class|gc|jni]\n    enable verbose output\n-version      print product version and exit\n-version:<value>\n    require the specified version to run\n-showversion  print product version and continue\n-jre-restrict-search | -jre-no-restrict-search\n    include/exclude user private JREs in the version search\n-? -help      print this help message\n-X            print help on non-standard options\n-ea[:<packagename>...|:<classname>]\n-enableassertions[:<packagename>...|:<classname>]\n    enable assertions\n-da[:<packagename>...|:<classname>]\n-disableassertions[:<packagename>...|:<classname>]\n    disable assertions\n-esa | -enablesystemassertions\n    enable system assertions\n-dsa | -disablesystemassertions\n    disable system assertions\n-agentlib:<libname>[=<options>]\n    load native agent library <libname>, e.g. -agentlib:hprof\n      see also, -agentlib:jdwp=help and -agentlib:hprof=help\n-agentpath:<pathname>[=<options>]\n    load native agent library by full pathname\n-javaagent:<jarpath>[=<options>]\n    load Java programming language agent, see java.lang.instrument\n-splash:<imagepath>\n    show splash screen with specified image\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br")])]),s("p",[a._v("​    内存大小设置：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# Java Heap 初始化大小(单位：MB)\nwrapper.java.initmemory=3\n\n# Java Heap 最大值(单位：MB)\nwrapper.java.maxmemory=64\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("​    应用程序参数设置：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 应用程序参数，也就是main函数的String[] args参数值，序号需从"1"开始，例如：\nwrapper.app.parameter.1=g21121\nwrapper.app.parameter.2=http://286.iteye.com/\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("​    在main函数和start方法中添加了参数打印语句来观察参数是否已经传入，代码如下：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('package com.helloworld.hello;\n\nimport org.tanukisoftware.wrapper.WrapperListener;\nimport org.tanukisoftware.wrapper.WrapperManager;\n\npublic class HelloWorld implements WrapperListener {\n\n    public static void main(String[] args) {\n        // 打印参数\n        for (String arg : args)\n            System.out.println(arg);\n        WrapperManager.start(new HelloWorld(), args);\n    }\n\n    @Override\n    public void controlEvent(int event) {\n        System.out.println("controlEvent(" + event + ")");\n        if ((event == WrapperManager.WRAPPER_CTRL_LOGOFF_EVENT) && (WrapperManager.isLaunchedAsService() || WrapperManager.isIgnoreUserLogoffs())) {\n        } else {\n            WrapperManager.stop(0);\n        }\n    }\n\n    @Override\n    public Integer start(String[] args) {\n        // 打印参数\n        for (String arg : args)\n            System.out.println(arg);\n        System.out.println("hello world!");\n        return null;\n    }\n\n    @Override\n    public int stop(int exitCode) {\n        System.out.println("stop(" + exitCode + ")");\n        return exitCode;\n    }\n\n}\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br")])]),s("p",[a._v("​    重新运行服务，结果如下：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("root@TFS:/usr/local/wrapper/bin# ./hello console\nRunning helloWorld...\nwrapper  | --\x3e Wrapper Started as Console\nwrapper  | Java Service Wrapper Community Edition 64-bit 3.5.20\nwrapper  |   Copyright (C) 1999-2013 Tanuki Software, Ltd. All Rights Reserved.\nwrapper  |     http://wrapper.tanukisoftware.com\nwrapper  | \nwrapper  | Launching a JVM...\njvm 1    | g21121\njvm 1    | http://286.iteye.com/\njvm 1    | WrapperManager: Initializing...\njvm 1    | g21121\njvm 1    | http://286.iteye.com/\njvm 1    | hello world!\njvm 1    | stop(0)\nwrapper  | <-- Wrapper Stopped\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("4.Wrapper 日志配置")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 是否显示debug日志\nwrapper.debug=TRUE\n\n# 控制台信息输出格式\nwrapper.console.format=PM\n\n# 控制台日志级别\nwrapper.console.loglevel=INFO\n\n# 日志文件位置及名称\nwrapper.logfile=../logs/wrapper.log\n\n# 日志文件输出格式\nwrapper.logfile.format=LPTM\n\n# 日志文件日志级别\nwrapper.logfile.loglevel=INFO\n\n# 限制日志文件大小，0为不限制，参数：k,m,g等\nwrapper.logfile.maxsize=10m\n\n# 限制最大日志文件数，0为不限制\nwrapper.logfile.maxfiles=0\n\n# syslog 日志级别\nwrapper.syslog.loglevel=NONE\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("5.Wrapper 基本属性配置")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 允许使用非连续编号的属性，例如：path的序号可以打乱\nwrapper.ignore_sequence_gaps=TRUE\n\n# 如果pid文件已经存在则不启动程序\nwrapper.pidfile.strict=TRUE\n\n# 控制台启动时显示的标题\nwrapper.console.title=------------Wrapper Console------------\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("6.Wrapper JVM 检查")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 检测JVM中的死锁线程（需要标准版Wrapper）\nwrapper.check.deadlock=TRUE\n#间隔，单位：秒\nwrapper.check.deadlock.interval=10\n#出现死锁时处理事件\nwrapper.check.deadlock.action=RESTART\n#信息输出级别，FULL:全部;SIMPLE:精简;NONE:无;\nwrapper.check.deadlock.output=FULL\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("​    以下为wrapper.check.deadlock.action的事件类型：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('DEBUG :\n    will cause a debug message to be logged. This is only really useful in helping to understand when the action is fired.\nDUMP :\n    will invoke a thread dump.\nGC (Since ver. 3.5.7) :\n    will invoke a full garbage collection sweep in the JVM. Be aware that doing this frequently can affect performance of the JVM as a full sweep will often cause all threads to freeze for the duration of the GC.\nRESTART :\n    will stop the current JVM and then restart a new invocation.\nSHUTDOWN :\n    will stop the JVM as well as the Wrapper.\nUSER_<n> (Professional Edition) :\n    will cause a user defined event to be fired. This can be either the sending of an email, or the execution of an external system command. The command could be anything from performing clean up operations to raising an SNMP trap.\nPAUSE :\n    will pause the Java application if pausing is enabled and the JVM is running. See the wrapper.pausable property for details.\nRESUME :\n    will resume the Java application if it is in a paused state. This could be used if the JVM is not stopped when paused. See the wrapper.pausable property for details.\nSUCCESS (Since ver. 3.5.5) :\n    will tell the Wrapper to reset its internal failed invocation count and count the current JVM invocation as "successful". This is probably not useful in this context, but here for consistency with other properties.\nNONE :\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("7.内存溢出检测")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 内存溢出检测，Wrapper提供了几种不同的匹配机制\nwrapper.filter.trigger.999=wrapper.filter.trigger.*java.lang.OutOfMemoryError\nwrapper.filter.allow_wildcards.999=TRUE\nwrapper.filter.action.999=NONE\nwrapper.filter.trigger.1000=[Loaded java.lang.OutOfMemoryError\nwrapper.filter.action.1000=NONE\nwrapper.filter.trigger.1001=java.lang.OutOfMemoryError\n#wrapper.filter.trigger.1001=Exception in thread "*" java.lang.OutOfMemoryError\n#wrapper.filter.allow_wildcards.1001=TRUE\nwrapper.filter.action.1001=RESTART\nwrapper.filter.message.1001=The JVM has run out of memory.\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("p",[a._v("​    "),s("strong",[a._v("8.Wrapper Email 通知设置(需要专业版Wrapper)")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 邮件基本信息设置\nwrapper.event.default.email.debug=TRUE\n#smtp服务器地址\nwrapper.event.default.email.smtp.host=\n#smtp服务器端口\nwrapper.event.default.email.smtp.port=25\n#邮件主题\nwrapper.event.default.email.subject=[%WRAPPER_HOSTNAME%:%WRAPPER_NAME%:%WRAPPER_EVENT_NAME%] Event Notification\n#发件人地址\nwrapper.event.default.email.sender=<Sender email>\n#收件人地址\nwrapper.event.default.email.recipient=<Recipient email>\n# 指定文件内容\nwrapper.event.jvm_restart.email.body=The JVM was restarted.\\n\\nPlease check on its status.\\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 邮件日志相关配置\nwrapper.event.default.email.attach_log=TRUE\nwrapper.event.default.email.maillog.lines=50\nwrapper.event.default.email.maillog.format=LPTM\nwrapper.event.default.email.maillog.loglevel=INFO\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 触发事件，即当以下事件为true时发送邮件\nwrapper.event.wrapper_start.email=TRUE\nwrapper.event.jvm_prelaunch.email=TRUE\nwrapper.event.jvm_start.email=TRUE\nwrapper.event.jvm_started.email=TRUE\nwrapper.event.jvm_deadlock.email=TRUE\nwrapper.event.jvm_stop.email=TRUE\nwrapper.event.jvm_stopped.email=TRUE\nwrapper.event.jvm_restart.email=TRUE\nwrapper.event.jvm_failed_invocation.email=TRUE\nwrapper.event.jvm_max_failed_invocations.email=TRUE\nwrapper.event.jvm_kill.email=TRUE\nwrapper.event.jvm_killed.email=TRUE\nwrapper.event.jvm_unexpected_exit.email=TRUE\nwrapper.event.wrapper_stop.email=TRUE\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("h2",{attrs:{id:"wrapper-把jar打包成windows服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wrapper-把jar打包成windows服务"}},[a._v("#")]),a._v(" wrapper 把jar打包成windows服务")]),a._v(" "),s("p",[a._v("你是不是在找将Java程序注册成系统服务的方法？试试JavaServiceWrapper这个工具吧，你可以从这个网站上面下载你喜欢的版本：http://wrapper.tanukisoftware.org/　，JavaServiceWrapper提供了适合市面上流行的操作系统的版本。")]),a._v(" "),s("p",[a._v("使用Wrapper将Java程序注册成系统服务有三种方式可供选择：")]),a._v(" "),s("p",[a._v("第一种是使用WrapperSimpleApp　这个帮助类来运行你的程序，这个是最简单的方法，也是官方推荐使用的方式，但是这样可能会对你的程序有改动，如果你在项目初期就开始考虑的话，这个方法还是不错的。像JBoss也是使用这种方式。")]),a._v(" "),s("p",[a._v("第二种方式是使用WraperStartStopApp这个类来实现功能，这个方法适合那些通过ClassA类来负责启动服务，ClassB类来负责停止服务的应用场景。")]),a._v(" "),s("p",[a._v("一．            运行环境")]),a._v(" "),s("p",[a._v("电脑上应该有java运行环境。")]),a._v(" "),s("p",[a._v("二．            需要软件")]),a._v(" "),s("p",[a._v("Java ServiceWrapper")]),a._v(" "),s("p",[a._v("下载地址：http://wrapper.tanukisoftware.org/")]),a._v(" "),s("p",[a._v("下载community 版，不要下载pro版，原因是wrapper并非完全免费的,pro 版会15分钟就重启一次wrapper.\n我用的方法是 自己继承 WrapperListener 写main()类，这样可以实现对服务 启动和关闭的监听。")]),a._v(" "),s("p",[a._v("首先建立java工程，将 wrapper.jar导入工程，看下运行类：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('package com.test;\n\nimport org.tanukisoftware.wrapper.WrapperManager;\nimport org.tanukisoftware.wrapper.WrapperListener;\n\n\npublic class TestService implements WrapperListener {\n    undefined\n\n    public void runService() {\n        undefined\n\n        new Thread() {\n            undefined\n\n            public void run() {\n                undefined\n\n                try {\n                    undefined\n                    while (true) {\n                        undefined\n                        System.out.println("testService is running ...");\n                        Thread.sleep(1000);\n                    }\n\n                } catch (InterruptedException e) {\n                    undefined\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n\n            }\n        }.start();\n    }\n\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        undefined\n        // TODO Auto-generated method stub\n\n        System.out.println("Initializing... ");\n        WrapperManager.start(new TestService(), args);\n    }\n\n\n    public void controlEvent(int arg0) {\n        undefined\n        // TODO Auto-generated method stub\n\n    }\n\n\n    public Integer start(String[] arg0) {\n        undefined\n        // TODO Auto-generated method stub\n\n        System.out.println("testService is start");\n        TestService service = new TestService();\n        service.runService();\n        return null;\n    }\n\n\n    public int stop(int arg0) {\n        undefined\n        // TODO Auto-generated method stub\n        System.out.println("testService is stop");\n        return 0;\n    }\n\n\n}\n\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br"),s("span",{staticClass:"line-number"},[a._v("50")]),s("br"),s("span",{staticClass:"line-number"},[a._v("51")]),s("br"),s("span",{staticClass:"line-number"},[a._v("52")]),s("br"),s("span",{staticClass:"line-number"},[a._v("53")]),s("br"),s("span",{staticClass:"line-number"},[a._v("54")]),s("br"),s("span",{staticClass:"line-number"},[a._v("55")]),s("br"),s("span",{staticClass:"line-number"},[a._v("56")]),s("br"),s("span",{staticClass:"line-number"},[a._v("57")]),s("br"),s("span",{staticClass:"line-number"},[a._v("58")]),s("br"),s("span",{staticClass:"line-number"},[a._v("59")]),s("br"),s("span",{staticClass:"line-number"},[a._v("60")]),s("br"),s("span",{staticClass:"line-number"},[a._v("61")]),s("br"),s("span",{staticClass:"line-number"},[a._v("62")]),s("br"),s("span",{staticClass:"line-number"},[a._v("63")]),s("br"),s("span",{staticClass:"line-number"},[a._v("64")]),s("br"),s("span",{staticClass:"line-number"},[a._v("65")]),s("br"),s("span",{staticClass:"line-number"},[a._v("66")]),s("br"),s("span",{staticClass:"line-number"},[a._v("67")]),s("br"),s("span",{staticClass:"line-number"},[a._v("68")]),s("br"),s("span",{staticClass:"line-number"},[a._v("69")]),s("br"),s("span",{staticClass:"line-number"},[a._v("70")]),s("br"),s("span",{staticClass:"line-number"},[a._v("71")]),s("br"),s("span",{staticClass:"line-number"},[a._v("72")]),s("br"),s("span",{staticClass:"line-number"},[a._v("73")]),s("br"),s("span",{staticClass:"line-number"},[a._v("74")]),s("br"),s("span",{staticClass:"line-number"},[a._v("75")]),s("br"),s("span",{staticClass:"line-number"},[a._v("76")]),s("br"),s("span",{staticClass:"line-number"},[a._v("77")]),s("br")])]),s("p",[a._v("接着把工程，编译并达成jar包。")]),a._v(" "),s("p",[a._v("三．            配置过程")]),a._v(" "),s("ol",[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 首先将java程序打成jar包。\n")])])])]),a._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" Java Service Wrapper包解压。\n")])])])]),a._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 比如要注册成服务的程序项目目录为workapp，那么在这个目录下面新建四个文件夹：\n")])])])])]),a._v(" "),s("p",[a._v("bin、conf、lib、logs。")]),a._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 把Java Service Wrapper包中bin目录下的Wrapper.exe、src/bin目录下的App.bat.in、InstallApp-NT.bat.in、UninstallApp-NT.bat.in文件拷贝到workapp的bin目录中,并分别改名为App.bat、InstallApp-NT.bat、UninstallApp-NT.bat。\n")])])])])]),a._v(" "),s("p",[a._v("------------------我下载的直接就是App.bat.，因此不需要重名了-----------------")]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 把Java Service Wrapper包中lib目录下的Wrapper.DLL、wrapper.jar拷贝到workapp的lib目录中。并且将项目的jar和所用到的jar都拷贝到该目录。\n")])])])]),a._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 把Java Service Wrapper包中srcconf目录下的wrapper.conf.in拷贝到workapp的conf目录中,并命名为wrapper.conf。\n")])])])]),a._v(" "),s("li",[s("p",[a._v("把 Java Service Wrapper包中logs 目录下文件wrapper.log拷贝过来，或者建立一个空文件 wrapper.log")])]),a._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 修改wrapper.conf配置文件，方法如下：\n")])])]),s("p",[a._v("主要修改以下几项即可：\n（1）JVM位置：\nwrapper.java.command=C:\\jdk1.5.0_07\\bin\\java\n（2）运行参数：如：\nwrapper.java.additional.1=-Dprogram.name=run.bat\n（3）你的Java程序所需的jar包必须全部在此标明，注意路径准确：\nwrapper.java.classpath.1=../lib/wrapper.jar\nwrapper.java.classpath.2=../lib/test_fat.jar")])])]),a._v(" "),s("p",[a._v("……//列出用到的所有jar")]),a._v(" "),s("p",[a._v("（4）你的Wrapper.DLL或wrapper.jar所在的目录\nwrapper.java.library.path.1=../lib")]),a._v(" "),s("p",[a._v("----------------------重点----------------------------------------------------------------------------\n（5）MAIN CLASS 此处决定了使用Java Service Wrapper的方式\nwrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp\n（6）你的Java应用程序的运行类\nwrapper.app.parameter.1= com.tes.Testjar")]),a._v(" "),s("p",[a._v("-----------------------重点---------------------------------------------------------------------------")]),a._v(" "),s("p",[a._v("我下载的wrapper-windows-x86-32-3.5.15-pro原来的配置")]),a._v(" "),s("p",[a._v("wrapper.java.mainclass=org.tanukisoftware.wrapper.test.Main")]),a._v(" "),s("p",[a._v("而我把它修改成知己的com.test.TestService")]),a._v(" "),s("p",[a._v("wrapper.java.mainclass=com.test.TestService")]),a._v(" "),s("p",[a._v("而  wrapper.app.parameter.1= com.tes.Testjar，我下载的这个参数配置是 # 号注释掉了，打开注释启动服务会报错。")]),a._v(" "),s("p",[a._v("在安装时有用的命令，特别是 》启动\nwrapper.exe -t wrapper.conf  可以实现安装后，立即启动服务。")]),a._v(" "),s("p",[a._v("》测试运行是否正常\nwrapper.exe -c wrapper.conf\n》安装服务\nwrapper.exe -i wrapper.conf\n》卸载服务\nwrapper.exe -r wrapper.conf\n》启动\nwrapper.exe -t wrapper.conf\n》停止\nwrapper.exe -p wrapper.conf")]),a._v(" "),s("p",[a._v("（6）注册为服务的名称和显示名，你可以随意进行设置\nwrapper.ntservice.name=testService\nwrapper.ntservice.displayname= testService\n（7）服务描述信息\nwrapper.ntservice.description= my_testService")]),a._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 修改好了以后，运行MyApp.bat即可运行你的java程序，这里可以测试配置的是否正确，如果可以运行，证明配置ok。\n")])])])]),a._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v(" 运行InstallApp-NT.bat可以进行服务的注册，UninstallApp-NT.bat为注销服务。\n")])])])]),a._v(" "),s("li",[s("p",[a._v("运行完注册服务InstallApp-NT.bat可以在 控制面板－管理程序－服务中看到你注册的服务名称。（如：testService）")])])]),a._v(" "),s("p",[a._v("其他wrapper.conf配置项:")]),a._v(" "),s("p",[a._v("#window服务配置\nwrapper.console.title=samplesvr\n#服务名\nwrapper.ntservice.name=samplesvr")]),a._v(" "),s("p",[a._v("#显示名称")]),a._v(" "),s("p",[a._v("wrapper.ntservice.displayname= sample  Service")]),a._v(" "),s("p",[a._v("#描述")]),a._v(" "),s("p",[a._v("wrapper.ntservice.description=sample Service")]),a._v(" "),s("p",[a._v("#依赖项")]),a._v(" "),s("p",[a._v("wrapper.ntservice.dependency.1=")]),a._v(" "),s("p",[a._v("#启动模式：  AUTO_START or DEMAND_START")]),a._v(" "),s("p",[a._v("wrapper.ntservice.starttype=AUTO_START")]),a._v(" "),s("p",[a._v("#是否交互.")]),a._v(" "),s("p",[a._v("wrapper.ntservice.interactive=false")]),a._v(" "),s("p",[a._v("在wrapper.conf中：\nwrapper.java.mainclass=这里写你的启动ClassName： YourStartUpClass －－注意是包含包名的全名\nwrapper.java.classpath.1=../lib/wrappertest.jar\nwrapper.java.classpath.2=../lib/wrapper.jar  //这里要将所有classppath写全，注意最后一位必须是 1 2 3 4 5 6…不能重复.")]),a._v(" "),s("p",[a._v("wrapper.ntservice.name=你的服务名\nwrapper.ntservice.description=你的服务的详细描述")]),a._v(" "),s("p",[a._v("直接使用 bin/TestWrapper.bat就可以测试你的服务了\nInstallTestWrapper-NT.bat －－安装服务\nUninstallTestWrapper-NT.bat －－卸载服务")])])}),[],!1,null,null,null);s.default=r.exports}}]);