(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{497:function(a,t,e){"use strict";e.r(t);var s=e(5),n=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_1-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-报错"}},[a._v("#")]),a._v(" 1.报错")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('Exception in thread "main" java.lang.IllegalStateException: Duplicate key http://www.google.com\n    at java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133)\n    at java.util.HashMap.merge(HashMap.java:1253)\n    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)\n    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n')])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("h2",{attrs:{id:"_2-解决"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-解决"}},[a._v("#")]),a._v(" 2.解决")]),a._v(" "),t("p",[a._v("通过查看Collectors.toMap的代码及注释我们会发现：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("public static <T, K, U> Collector<T, ?, Map<K,U>> toMap(Function<? super T, ? extends K> keyMapper,\n                                Function<? super T, ? extends U> valueMapper) {\n    return toMap(keyMapper, valueMapper, throwingMerger(), HashMap::new);\n}\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("If the mapped keys contains duplicates (according to Object#equals(Object)), \nan IllegalStateException is thrown when the collection operation is performed. \nIf the mapped keys may have duplicates, use toMap(Function, Function, BinaryOperator) instead.\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("所以说呢，我们使用的Collectors.toMap的方法是不支持key重复的，并且如果有重复的时候，建议我们使用toMap(Function, Function, BinaryOperator) 方法来替换使用，并且我们还可以定义当key重复的时候，是使用旧的数据还是使用新的数据\n即：")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Map<String, String> memberMap = list.stream()\n\t\t\t\t\t\t\t\t\t.collect(Collectors.toMap(Member::getId, Member::getImgPath,(oldValue,newValue) -> oldValue));\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);