(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{601:function(n,s,e){"use strict";e.r(s);var a=e(5),t=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("U2FsdGVkX1/TXmYWHFLo1pWEaErB3PZTN5mrl+YMqqVhXHPLzo+nZWpNUXFIfHKg\n6XPyTcNH83zI/OReCDRBlERjz1ENdmlil5W7uKowWDPKH/p16w==\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("h2",{attrs:{id:"java-项目中如何实现接口调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-项目中如何实现接口调用"}},[n._v("#")]),n._v(" JAVA 项目中如何实现接口调用")]),n._v(" "),s("p",[n._v("① Httpclient")]),n._v(" "),s("p",[n._v("HttpClient 是 Apache Jakarta Common 下的子项目，用来提供高效的、最新的、功能丰富的支持 Http 协议的客户端编程工具包，并且它支持 HTTP 协议最新版本和建议。HttpClient 相比传统 JDK 自带的 URLConnection，提升了易用性和灵活性，使客户端发送 HTTP 请求变得容易，提高了开发的效率。")]),n._v(" "),s("p",[n._v("② Okhttp")]),n._v(" "),s("p",[n._v("一个处理网络请求的开源项目，是安卓端最火的轻量级框架，由 Square 公司贡献，用于替代 HttpUrlConnection 和 Apache HttpClient。OkHttp 拥有简洁的 API、高效的性能，并支持多种协议（HTTP/2 和 SPDY）。")]),n._v(" "),s("p",[n._v("③ HttpURLConnection")]),n._v(" "),s("p",[n._v("HttpURLConnection 是 "),s("a",{attrs:{href:"http://c.biancheng.net/java/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Java"),s("OutboundLink")],1),n._v(" 的标准类，它继承自 URLConnection，可用于向指定网站发送 GET 请求、POST 请求。HttpURLConnection 使用比较复杂，不像 HttpClient 那样容易使用。")]),n._v(" "),s("p",[n._v("④ RestTemplate，WebClient")]),n._v(" "),s("p",[n._v("RestTemplate 是 "),s("a",{attrs:{href:"http://c.biancheng.net/spring/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Spring"),s("OutboundLink")],1),n._v(" 提供的用于访问 Rest 服务的客户端，RestTemplate 提供了多种便捷访问远程 HTTP 服务的方法，能够大大提高客户端的编写效率。")]),n._v(" "),s("p",[n._v("上面介绍的是最常见的几种调用接口的方法，我们下面要介绍的方法比上面的更简单、方便，它就是 Feign。")]),n._v(" "),s("h2",{attrs:{id:"什么是feign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是feign"}},[n._v("#")]),n._v(" 什么是Feign")]),n._v(" "),s("p",[n._v("Feign是Netflix开发的声明式、模板化的HTTP客户端，其灵感来自Retrofit、JAXRS-2.0以及WebSocket。Feign可帮助我们更加便捷、优雅地调用HTTP API。")]),n._v(" "),s("p",[n._v("Feign支持多种注解，例如Feign自带的注解或者JAX-RS注解等。"),s("strong",[n._v("Spring Cloud openfeign对Feign进行了增强，使其支持Spring MVC注解，另外还整合了Ribbon和Eureka，从而使得Feign的使用更加方便")])]),n._v(" "),s("p",[s("strong",[n._v("优势")])]),n._v(" "),s("p",[n._v("Feign可以做到使用 HTTP 请求远程服务时就像调用本地方法一样的体验，开发者完全感知不到这是远程方法，更感知不到这是个 HTTP 请求。它像 Dubbo 一样，consumer 直接调用接口方法调用 provider，而不需要通过常规的 Http Client 构造请求再解析返回数据。它解决了让开发者调用远程接口就跟调用本地方法一样，无需关注与远程的交互细节，更无需关注分布式环境开发。")]),n._v(" "),s("h2",{attrs:{id:"feign的设计架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#feign的设计架构"}},[n._v("#")]),n._v(" Feign的设计架构")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/15.png",alt:""}})]),n._v(" "),s("h2",{attrs:{id:"ribbon-feign对比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ribbon-feign对比"}},[n._v("#")]),n._v(" Ribbon，Feign对比")]),n._v(" "),s("p",[n._v("Ribbon+RestTemplate进行微服务调用")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@Bean\n@LoadBalanced\npublic RestTemplate restTemplate() {\n    return new RestTemplate();\n}\n\n//调用方式\nString url = "http://mall-order/order/findOrderByUserId/"+id;\nR result = restTemplate.getForObject(url,R.class);\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("p",[n._v("Feign进行微服务调用")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@FeignClient(value = "mall-order",path = "/order")\npublic interface OrderFeignService {\n    @RequestMapping("/findOrderByUserId/{userId}")\n    public R findOrderByUserId(@PathVariable("userId") Integer userId);\n}\n\n@Autowired\nOrderFeignService orderFeignService;\n//feign调用\nR result = orderFeignService.findOrderByUserId(id);\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br")])]),s("h2",{attrs:{id:"feign单独使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#feign单独使用"}},[n._v("#")]),n._v(" Feign单独使用")]),n._v(" "),s("p",[n._v("引入依赖")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("<dependency>\n    <groupId>com.netflix.feign</groupId>\n    <artifactId>feign-core</artifactId>\n    <version>8.18.0</version>\n</dependency>\n<dependency>\n    <groupId>com.netflix.feign</groupId>\n    <artifactId>feign-jackson</artifactId>\n    <version>8.18.0</version>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("p",[n._v("编写接口")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('public interface RemoteService {\n\n    @Headers({"Content-Type: application/json","Accept: application/json"})\n    @RequestLine("GET /order/findOrderByUserId/{userId}")\n    public R findOrderByUserId(@Param("userId") Integer userId);\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("调用")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('public class FeignDemo {\n\n    public static void main(String[] args) {\n\n        //基于json\n        // encoder指定对象编码方式，decoder指定对象解码方式\n        RemoteService service = Feign.builder()\n                .encoder(new JacksonEncoder())\n                .decoder(new JacksonDecoder())\n                .options(new Request.Options(1000, 3500))\n                .retryer(new Retryer.Default(5000, 5000, 3))\n                .target(RemoteService.class, "http://localhost:8020/");\n\n        System.out.println(service.findOrderByUserId(1));\n    }\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br")])]),s("h2",{attrs:{id:"spring-cloud-alibaba快速整合feign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-alibaba快速整合feign"}},[n._v("#")]),n._v(" Spring Cloud Alibaba快速整合Feign")]),n._v(" "),s("p",[n._v("①引入依赖")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("\x3c!-- openfeign 远程调用 --\x3e\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("②编写调用接口+@FeignClient注解")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@FeignClient(value = "mall-order",path = "/order")\npublic interface OrderFeignService {\n\n    @RequestMapping("/findOrderByUserId/{userId}")\n    public R findOrderByUserId(@PathVariable("userId") Integer userId);\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("③调用端在启动类上添加@EnableFeignClients注解")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("@SpringBootApplication\n@EnableFeignClients\npublic class MallUserFeignDemoApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MallUserFeignDemoApplication.class, args);\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("④发起调用，像调用本地方式一样调用远程服务")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @Autowired\n    OrderFeignService orderFeignService;\n\n    @RequestMapping(value = "/findOrderByUserId/{id}")\n    public R  findOrderByUserId(@PathVariable("id") Integer id) {\n        //feign调用\n        R result = orderFeignService.findOrderByUserId(id);\n        return result;\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br")])]),s("p",[n._v("提示： Feign 的继承特性可以让服务的接口定义单独抽出来，作为公共的依赖，以方便使用。")]),n._v(" "),s("h2",{attrs:{id:"spring-cloud-feign的自定义配置及使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-feign的自定义配置及使用"}},[n._v("#")]),n._v(" Spring Cloud Feign的自定义配置及使用")]),n._v(" "),s("p",[n._v("Feign 提供了很多的扩展机制，让用户可以更加灵活的使用。")]),n._v(" "),s("h3",{attrs:{id:"日志配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志配置"}},[n._v("#")]),n._v(" 日志配置")]),n._v(" "),s("p",[n._v("有时候我们遇到 Bug，比如接口调用失败、参数没收到等问题，或者想看看调用性能，就需要配置 Feign 的日志了，以此让 Feign 把请求信息输出来。")]),n._v(" "),s("p",[n._v("①定义一个配置类，指定日志级别")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("// 注意： 此处配置@Configuration注解就会全局生效，如果想指定对应微服务生效，就不能配置\npublic class FeignConfig {\n    /**\n     * 日志级别\n     *\n     * @return\n     */\n    @Bean\n    public Logger.Level feignLoggerLevel() {\n        return Logger.Level.FULL;\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br")])]),s("p",[n._v("通过源码可以看到日志等级有 4 种，分别是：")]),n._v(" "),s("ul",[s("li",[n._v("NONE【性能最佳，适用于生产】：不记录任何日志（默认值）。")]),n._v(" "),s("li",[n._v("BASIC【适用于生产环境追踪问题】：仅记录请求方法、URL、响应状态代码以及执行时间。")]),n._v(" "),s("li",[n._v("HEADERS：记录BASIC级别的基础上，记录请求和响应的header。")]),n._v(" "),s("li",[n._v("FULL【比较适用于开发及测试环境定位问题】：记录请求和响应的header、body和元数据。")])]),n._v(" "),s("p",[n._v("② 局部配置，让调用的微服务生效，在@FeignClient 注解中指定使用的配置类")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/555.png",alt:""}})]),n._v(" "),s("p",[n._v('③ 在yml配置文件中执行 Client 的日志级别才能正常输出日志，格式是"logging.level.feign接口包路径=debug"')]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("logging:\n  level:\n    com.tuling.mall.feigndemo.feign: debug\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("p",[n._v("测试：BASIC级别日志")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/556.png",alt:""}})]),n._v(" "),s("p",[n._v("补充：局部配置可以在yml中配置")]),n._v(" "),s("p",[n._v("对应属性配置类： org.springframework.cloud.openfeign.FeignClientProperties.FeignClientConfiguration")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  client:\n    config:\n      mall-order:  #对应微服务\n        loggerLevel: FULL\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("h3",{attrs:{id:"契约配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#契约配置"}},[n._v("#")]),n._v(" 契约配置")]),n._v(" "),s("p",[n._v("Spring Cloud 在 Feign 的基础上做了扩展，可以让 Feign 支持 Spring MVC 的注解来调用。")]),n._v(" "),s("p",[n._v("原生的 Feign 是不支持 Spring MVC 注解的，如果你想在 Spring Cloud 中使用原生的注解方式来定义客户端也是可以的，通过配置契约来改变这个配置，Spring Cloud 中默认的是 SpringMvcContract。")]),n._v(" "),s("p",[n._v("①修改契约配置，支持Feign原生的注解")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/**\n * 修改契约配置，支持Feign原生的注解\n * @return\n */\n@Bean\npublic Contract feignContract() {\n    return new Contract.Default();\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br")])]),s("p",[n._v("注意：修改契约配置后，OrderFeignService 不再支持springmvc的注解，需要使用Feign原生的注解")]),n._v(" "),s("p",[n._v("②OrderFeignService 中配置使用Feign原生的注解")]),n._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@FeignClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"mall-order"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"/order"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("interface")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("OrderFeignService")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@RequestLine")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"GET /findOrderByUserId/{userId}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("public")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("R")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("findOrderByUserId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[n._v("@Param")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"userId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Integer")]),n._v(" userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("③补充，也可以通过yml配置契约")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  client:\n    config:\n      mall-order:  #对应微服务\n        loggerLevel: FULL\n        contract: feign.Contract.Default   #指定Feign原生注解契约配置\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("h3",{attrs:{id:"通过拦截器实现认证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过拦截器实现认证"}},[n._v("#")]),n._v(" 通过拦截器实现认证")]),n._v(" "),s("p",[n._v("通常我们调用的接口都是有权限控制的，很多时候可能认证的值是通过参数去传递的，还有就是通过请求头去传递认证信息，比如 Basic 认证方式。  接口鉴权")]),n._v(" "),s("p",[n._v("Feign 中我们可以直接配置 Basic 认证")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@Configuration  // 全局配置\npublic class FeignConfig {\n    @Bean\n    public BasicAuthRequestInterceptor basicAuthRequestInterceptor() {\n        return new BasicAuthRequestInterceptor("fox", "123456");\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("扩展点： feign."),s("strong",[n._v("RequestInterceptor")])]),n._v(" "),s("p",[n._v("每次 feign 发起http调用之前，会去执行拦截器中的逻辑。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public interface RequestInterceptor {\n\n  /**\n   * Called for every request. Add data using methods on the supplied {@link RequestTemplate}.\n   */\n  void apply(RequestTemplate template);\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("使用场景")]),n._v(" "),s("ol",[s("li",[n._v("统一添加 header 信息；")]),n._v(" "),s("li",[n._v("对 body 中的信息做修改或替换；")])]),n._v(" "),s("p",[s("strong",[n._v("自定义拦截器实现认证逻辑")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('public class FeignAuthRequestInterceptor implements RequestInterceptor {\n    @Override\n    public void apply(RequestTemplate template) {\n        // 业务逻辑\n        String access_token = UUID.randomUUID().toString();\n        template.header("Authorization",access_token);\n    }\n}\n\n@Configuration  // 全局配置\npublic class FeignConfig {\n    @Bean\n    public Logger.Level feignLoggerLevel() {\n        return Logger.Level.FULL;\n    }\n    /**\n     * 自定义拦截器\n     * @return\n     */\n    @Bean\n    public FeignAuthRequestInterceptor feignAuthRequestInterceptor(){\n        return new FeignAuthRequestInterceptor();\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br")])]),s("p",[n._v("测试")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/16.png",alt:""}})]),n._v(" "),s("p",[n._v("补充：可以在yml中配置")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  client:\n    config:\n      mall-order:  #对应微服务\n        requestInterceptors[0]:  #配置拦截器\n          com.tuling.mall.feigndemo.interceptor.FeignAuthRequestInterceptor\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("通过 @RequestHeader获取请求参数")]),n._v(" "),s("p",[n._v("建议在filter,interceptor中处理")]),n._v(" "),s("h3",{attrs:{id:"超时时间配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#超时时间配置"}},[n._v("#")]),n._v(" 超时时间配置")]),n._v(" "),s("p",[n._v("通过 Options 可以配置连接超时时间和读取超时时间，Options 的第一个参数是连接的超时时间（ms），默认值是 2s；第二个是请求处理的超时时间（ms），默认值是 5s。")]),n._v(" "),s("p",[n._v("全局配置")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("@Configuration\npublic class FeignConfig {\n    @Bean\n    public Request.Options options() {\n        return new Request.Options(5000, 10000);\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("yml中配置")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  client:\n    config:\n      mall-order:  #对应微服务\n        # 连接超时时间，默认2s\n        connectTimeout: 5000\n        # 请求处理超时时间，默认5s\n        readTimeout: 10000\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br")])]),s("p",[n._v("补充说明： Feign的底层用的是Ribbon，但超时时间以Feign配置为准")]),n._v(" "),s("p",[n._v("测试超时情况：")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/17.png",alt:""}})]),n._v(" "),s("p",[n._v("返回结果")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/18.png",alt:""}})]),n._v(" "),s("h3",{attrs:{id:"客户端组件配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客户端组件配置"}},[n._v("#")]),n._v(" 客户端组件配置")]),n._v(" "),s("p",[n._v("Feign 中默认使用 JDK 原生的 URLConnection 发送 HTTP 请求，我们可以集成别的组件来替换掉 URLConnection，比如 Apache HttpClient，OkHttp。")]),n._v(" "),s("p",[n._v("Feign发起调用真正执行逻辑：feign.Client#execute   （扩展点）")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/19.png",alt:""}})]),n._v(" "),s("h4",{attrs:{id:"_1-配置apache-httpclient"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置apache-httpclient"}},[n._v("#")]),n._v(" ① 配置Apache HttpClient")]),n._v(" "),s("p",[n._v("引入依赖")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("\x3c!-- Apache HttpClient --\x3e\n<dependency>\n    <groupId>org.apache.httpcomponents</groupId>\n    <artifactId>httpclient</artifactId>\n    <version>4.5.7</version>\n</dependency>\n<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-httpclient</artifactId>\n    <version>10.1.0</version>\n</dependency>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("p",[n._v("然后修改yml配置，将 Feign 的 Apache HttpClient启用 ：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  #feign 使用 Apache HttpClient  可以忽略，默认开启\n  httpclient:\n    enabled: true  \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("p",[n._v("关于配置可参考源码： org.springframework.cloud.openfeign.FeignAutoConfiguration")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/20.png",alt:""}})]),n._v(" "),s("p",[n._v("测试：调用会进入feign.httpclient.ApacheHttpClient#execute")]),n._v(" "),s("h4",{attrs:{id:"_2-配置-okhttp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置-okhttp"}},[n._v("#")]),n._v(" ② 配置 OkHttp")]),n._v(" "),s("p",[n._v("引入依赖")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-okhttp</artifactId>\n</dependency>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("p",[n._v("然后修改yml配置，将 Feign 的 HttpClient 禁用，启用 OkHttp，配置如下：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  #feign 使用 okhttp\n  httpclient:\n    enabled: false\n  okhttp:\n    enabled: true\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("关于配置可参考源码： org.springframework.cloud.openfeign.FeignAutoConfiguration")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/21.png",alt:""}})]),n._v(" "),s("p",[n._v("测试：调用会进入feign.okhttp.OkHttpClient#execute")]),n._v(" "),s("h3",{attrs:{id:"gzip-压缩配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gzip-压缩配置"}},[n._v("#")]),n._v(" GZIP 压缩配置")]),n._v(" "),s("p",[n._v("开启压缩可以有效节约网络资源，提升接口性能，我们可以配置 GZIP 来压缩数据：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  # 配置 GZIP 来压缩数据\n  compression:\n    request:\n      enabled: true\n      # 配置压缩的类型\n      mime-types: text/xml,application/xml,application/json\n      # 最小压缩值\n      min-request-size: 2048\n    response:\n      enabled: true\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("p",[n._v("注意：只有当 Feign 的 Http Client 不是 okhttp3 的时候，压缩才会生效，配置源码在FeignAcceptGzipEncodingAutoConfiguration")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/tuling4/22.png",alt:""}})]),n._v(" "),s("p",[n._v('核心代码就是 @ConditionalOnMissingBean（type="okhttp3.OkHttpClient"），表示 Spring BeanFactory 中不包含指定的 bean 时条件匹配，也就是没有启用 okhttp3 时才会进行压缩配置。')]),n._v(" "),s("h3",{attrs:{id:"编码器-解码器配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编码器-解码器配置"}},[n._v("#")]),n._v(" 编码器，解码器配置")]),n._v(" "),s("p",[n._v("Feign 中提供了自定义的编码解码器设置，同时也提供了多种编码器的实现，比如 Gson、Jaxb、Jackson。我们可以用不同的编码解码器来处理数据的传输。")]),n._v(" "),s("p",[s("strong",[n._v("如果你想传输 XML 格式的数据，可以自定义 XML 编码解码器来实现获取使用官方提供的 Jaxb")]),n._v("。")]),n._v(" "),s("p",[n._v("扩展点：Encoder & Decoder")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public interface Encoder {\n    void encode(Object object, Type bodyType, RequestTemplate template) throws EncodeException;\n}\npublic interface Decoder {\n    Object decode(Response response, Type type) throws IOException, DecodeException, FeignException;\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("Java配置方式")]),n._v(" "),s("p",[n._v("配置编码解码器只需要在 Feign 的配置类中注册 Decoder 和 Encoder 这两个类即可:")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("@Bean\npublic Decoder decoder() {\n    return new JacksonDecoder();\n}\n@Bean\npublic Encoder encoder() {\n    return new JacksonEncoder();\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br")])]),s("p",[n._v("yml配置方式")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("feign:\n  client:\n    config:\n      mall-order:  #对应微服务\n        # 配置编解码器\n        encoder: feign.jackson.JacksonEncoder\n        decoder: feign.jackson.JacksonDecoder\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("h2",{attrs:{id:"图片附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片附录"}},[n._v("#")]),n._v(" 图片附录")]),n._v(" "),s("h3",{attrs:{id:"springboot-feign源码分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot-feign源码分析"}},[n._v("#")]),n._v(" springboot Feign源码分析")]),n._v(" "),s("p",[s("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/springboot/Feign%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.png",alt:""}})])])}),[],!1,null,null,null);s.default=t.exports}}]);