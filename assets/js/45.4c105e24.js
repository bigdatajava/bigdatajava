(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{413:function(s,a,t){"use strict";t.r(a);var e=t(5),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("ğŸ€ â›„ï¸ ğŸ€")]),s._v(" "),a("p",[s._v("å®˜ç½‘æ‰€æœ‰å‘½ä»¤ï¼š"),a("code",[s._v("https://redis.io/commands")])]),s._v(" "),a("h2",{attrs:{id:"ç±»å‹æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç±»å‹æ¦‚è¿°"}},[s._v("#")]),s._v(" ç±»å‹æ¦‚è¿°")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/20231219/image-20231227130707055.png",alt:"image-20231227130707055"}})]),s._v(" "),a("h2",{attrs:{id:"string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[s._v("#")]),s._v(" String")]),s._v(" "),a("h3",{attrs:{id:"å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ"}},[s._v("#")]),s._v(" å­—ç¬¦ä¸²å¸¸ç”¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("help @string\nSET key value  //å­˜å…¥å­—ç¬¦ä¸²é”®å€¼å¯¹\nMSET key value [key value ...]  //æ‰¹é‡å­˜å‚¨å­—ç¬¦ä¸²é”®å€¼å¯¹\nSETNX key value  //å­˜å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„å­—ç¬¦ä¸²é”®å€¼å¯¹\nGET key  //è·å–ä¸€ä¸ªå­—ç¬¦ä¸²é”®å€¼\nMGET key [key ...]   //æ‰¹é‡è·å–å­—ç¬¦ä¸²é”®å€¼\nDEL key [key ...]  //åˆ é™¤ä¸€ä¸ªé”®\nEXPIRE key seconds  //è®¾ç½®ä¸€ä¸ªé”®çš„è¿‡æœŸæ—¶é—´(ç§’)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("åŸå­åŠ å‡")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("INCR key  //å°†keyä¸­å‚¨å­˜çš„æ•°å­—å€¼åŠ 1\nDECR key  //å°†keyä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡1\nINCRBY key increment  //å°†keyæ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šincrement\nDECRBY key decrement  //å°†keyæ‰€å‚¨å­˜çš„å€¼å‡å»decrement\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"åº”è¯¥åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”è¯¥åœºæ™¯"}},[s._v("#")]),s._v(" åº”è¯¥åœºæ™¯")]),s._v(" "),a("h4",{attrs:{id:"å•å€¼ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å•å€¼ç¼“å­˜"}},[s._v("#")]),s._v(" å•å€¼ç¼“å­˜")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SET  key  value \t\nGET  key \t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"å¯¹è±¡ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡ç¼“å­˜"}},[s._v("#")]),s._v(" å¯¹è±¡ç¼“å­˜")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SET  user:1  value(jsonæ ¼å¼æ•°æ®)\nMSET  user:1:name zhuge user:1:balance 1888\nMGET  user:1:name   user:1:balance\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"åˆ†å¸ƒå¼é”"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼é”"}},[s._v("#")]),s._v(" åˆ†å¸ƒå¼é”")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SETNX  product:10001  true \t\t//è¿”å›1ä»£è¡¨è·å–é”æˆåŠŸ\nSETNX  product:10001  true \t\t//è¿”å›0ä»£è¡¨è·å–é”å¤±è´¥\nï¼ˆæ­¤è¿‡ç¨‹ï¼‰æ‰§è¡Œä¸šåŠ¡æ“ä½œ\nDEL  product:10001\t\t\t//æ‰§è¡Œå®Œä¸šåŠ¡é‡Šæ”¾é”\n\nSET product:10001 true  ex  10  nx\t//é˜²æ­¢ç¨‹åºæ„å¤–ç»ˆæ­¢å¯¼è‡´æ­»é”\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"è®¡æ•°å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è®¡æ•°å™¨"}},[s._v("#")]),s._v(" è®¡æ•°å™¨")]),s._v(" "),a("p",[s._v("ä¾‹å¦‚ï¼šç‚¹èµæ•°ï¼Œé˜…è¯»æ•°")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("INCR article:readcount:{æ–‡ç« id}Â  \t\nGET article:readcount:{æ–‡ç« id} \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"webé›†ç¾¤sessionå…±äº«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webé›†ç¾¤sessionå…±äº«"}},[s._v("#")]),s._v(" Webé›†ç¾¤sessionå…±äº«")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("spring session + rediså®ç°sessionå…±äº«\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€åºåˆ—å·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€åºåˆ—å·"}},[s._v("#")]),s._v(" åˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€åºåˆ—å·")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("INCRBY  orderId  1000\t\t//redisæ‰¹é‡ç”Ÿæˆåºåˆ—å·æå‡æ€§èƒ½\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"æºç åº•å±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åº•å±‚"}},[s._v("#")]),s._v(" æºç åº•å±‚")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[s._v("æ•°æ®ç»“æ„\n\nredis "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v(" ä»¥å‰\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" free"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nredis "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v(" å\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typedef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("sds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("__attribute__")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__packed__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 3 lsb of type, and 5 msb of string length */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("__attribute__")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__packed__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint8_t")]),s._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* used */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint8_t")]),s._v(" alloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* excluding the header and null terminator */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 3 lsb of type, 5 unused bits */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("__attribute__")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__packed__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr16")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint16_t")]),s._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* used */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint16_t")]),s._v(" alloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* excluding the header and null terminator */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 3 lsb of type, 5 unused bits */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("__attribute__")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__packed__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr32")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint32_t")]),s._v(" len"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* used */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint32_t")]),s._v(" alloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* excluding the header and null terminator */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 3 lsb of type, 5 unused bits */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" buf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("__attribute__")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__packed__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("sdshdr64")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#define SDS_TYPE_5  0\n#define SDS_TYPE_8  1\n#define SDS_TYPE_16 2\n#define SDS_TYPE_32 3\n#define SDS_TYPE_64 4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("static inline char sdsReqType(size_t string_size) {\n    if (string_size < 32)  \n        return SDS_TYPE_5;\n    if (string_size < 0xff) //2^8 -1  \n        return SDS_TYPE_8;\n    if (string_size < 0xffff) // 2^16 -1  \n        return SDS_TYPE_16;\n    if (string_size < 0xffffffff)  // 2^32 -1 \n        return SDS_TYPE_32;\n    return SDS_TYPE_64;\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[s._v("#")]),s._v(" Hash")]),s._v(" "),a("h3",{attrs:{id:"hashå¸¸ç”¨æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashå¸¸ç”¨æ“ä½œ"}},[s._v("#")]),s._v(" Hashå¸¸ç”¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("HSET  key  field  value \t\t\t//å­˜å‚¨ä¸€ä¸ªå“ˆå¸Œè¡¨keyçš„é”®å€¼\nHSETNX  key  field  value \t\t//å­˜å‚¨ä¸€ä¸ªä¸å­˜åœ¨çš„å“ˆå¸Œè¡¨keyçš„é”®å€¼\nHMSET  key  field  value [field value ...] \t//åœ¨ä¸€ä¸ªå“ˆå¸Œè¡¨keyä¸­å­˜å‚¨å¤šä¸ªé”®å€¼å¯¹\nHGET  key  field \t\t\t\t//è·å–å“ˆå¸Œè¡¨keyå¯¹åº”çš„fieldé”®å€¼\nHMGET  key  field  [field ...] \t\t//æ‰¹é‡è·å–å“ˆå¸Œè¡¨keyä¸­å¤šä¸ªfieldé”®å€¼\nHDEL  key  field  [field ...] \t\t//åˆ é™¤å“ˆå¸Œè¡¨keyä¸­çš„fieldé”®å€¼\nHLEN  key\t\t\t\t//è¿”å›å“ˆå¸Œè¡¨keyä¸­fieldçš„æ•°é‡\nHGETALLÂ  key\t\t\t\t//è¿”å›å“ˆå¸Œè¡¨keyä¸­æ‰€æœ‰çš„é”®å€¼\n\nHINCRBY  key  field  increment \t\t//ä¸ºå“ˆå¸Œè¡¨keyä¸­fieldé”®çš„å€¼åŠ ä¸Šå¢é‡increment\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"åº”ç”¨åœºæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯"}},[s._v("#")]),s._v(" åº”ç”¨åœºæ™¯")]),s._v(" "),a("h4",{attrs:{id:"å¯¹è±¡ç¼“å­˜-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡ç¼“å­˜-2"}},[s._v("#")]),s._v(" å¯¹è±¡ç¼“å­˜")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("HMSET  user  {userId}:name  zhuge  {userId}:balance  1888\nHMSET  user  1:name  zhuge  1:balance  1888\nHMGET  user  1:name  1:balance  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"ç”µå•†è´­ç‰©è½¦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”µå•†è´­ç‰©è½¦"}},[s._v("#")]),s._v(" ç”µå•†è´­ç‰©è½¦")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("- ç”µå•†è´­ç‰©è½¦\n1)ä»¥ç”¨æˆ·idä¸ºkey\n2ï¼‰å•†å“idä¸ºfield\n3ï¼‰å•†å“æ•°é‡ä¸ºvalue\n\n- è´­ç‰©è½¦æ“ä½œ\n1)æ·»åŠ å•†å“ hset cart:1001 10088 1\n2)å¢åŠ æ•°é‡ hincrby cart:1001 10088 1\n3)å•†å“æ€»æ•° hlen cart:1001\n4)åˆ é™¤å•†å“ hdel cart:1001 10088\n5)è·å–è´­ç‰©è½¦æ‰€æœ‰å•†å“ hgetall cart:1001\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829140401313.png",alt:"image-20210829140401313"}})]),s._v(" "),a("h3",{attrs:{id:"hashç»“æ„ä¼˜ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hashç»“æ„ä¼˜ç¼ºç‚¹"}},[s._v("#")]),s._v(" Hashç»“æ„ä¼˜ç¼ºç‚¹")]),s._v(" "),a("ul",[a("li",[s._v("ä¼˜ç‚¹")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("åŒç±»æ•°æ®å½’ç±»æ•´åˆå‚¨å­˜ï¼Œæ–¹ä¾¿æ•°æ®ç®¡ç†")])]),s._v(" "),a("li",[a("p",[s._v("ç›¸æ¯”stringæ“ä½œæ¶ˆè€—å†…å­˜ä¸cpuæ›´å°")])]),s._v(" "),a("li",[a("p",[s._v("ç›¸æ¯”stringå‚¨å­˜æ›´èŠ‚çœç©ºé—´")])])]),s._v(" "),a("ul",[a("li",[s._v("ç¼ºç‚¹")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("è¿‡æœŸåŠŸèƒ½ä¸èƒ½ä½¿ç”¨åœ¨fieldä¸Šï¼Œåªèƒ½ç”¨åœ¨keyä¸Š")])]),s._v(" "),a("li",[a("p",[s._v("Redisé›†ç¾¤æ¶æ„ä¸‹ä¸é€‚åˆå¤§è§„æ¨¡ä½¿ç”¨")])])]),s._v(" "),a("h3",{attrs:{id:"æºç åº•å±‚-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åº•å±‚-2"}},[s._v("#")]),s._v(" æºç åº•å±‚")]),s._v(" "),a("p",[s._v("Hashæ•°æ®ç»“æ„åº•å±‚å®ç°ä¸ºä¸€ä¸ªå­—å…¸ï¼ˆdictï¼‰ï¼Œä¹Ÿæ˜¯RedisBbç”¨æ¥å­˜å‚¨K-Vçš„ä¹¦æ®ç»“æ„ï¼Œå½“æ•°æ®é‡æ¯”è¾ƒå°ï¼Œæˆ–è€…å•ä¸ªå…ƒç´ æ¯”è¾ƒå°æ—¶ï¼Œåº•å±‚ç”¨ziplistå­˜å‚¨ï¼Œæ•°æ®å¤§å°å’Œå…ƒç´ æ•°é‡é˜ˆå€¼å¯ä»¥é€šè¿‡ä¸€ä¸‹å‚æ•°è®¾ç½®")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184049175.png",alt:"image-20210829184049175"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hash-max-ziplist-entries  512 //  ziplist å…ƒç´ ä¸ªæ•°è¶…è¿‡ 512 ï¼Œå°†æ”¹ä¸ºhashtableç¼–ç  \nhash-max-ziplist-value    64 //  å•ä¸ªå…ƒç´ å¤§å°è¶…è¿‡ 64 byteæ—¶ï¼Œå°†æ”¹ä¸ºhashtableç¼–ç \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"list"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[s._v("#")]),s._v(" List")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829140859502.png",alt:"image-20210829140859502"}})]),s._v(" "),a("h3",{attrs:{id:"listå¸¸ç”¨æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listå¸¸ç”¨æ“ä½œ"}},[s._v("#")]),s._v(" Listå¸¸ç”¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("LPUSH  key  value [value ...]  //å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼valueæ’å…¥åˆ°keyåˆ—è¡¨çš„è¡¨å¤´(æœ€å·¦è¾¹)\nRPUSH  key  value [value ...]  //å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼valueæ’å…¥åˆ°keyåˆ—è¡¨çš„è¡¨å°¾(æœ€å³è¾¹)\nLPOP  key\t//ç§»é™¤å¹¶è¿”å›keyåˆ—è¡¨çš„å¤´å…ƒç´ \nRPOP  key\t//ç§»é™¤å¹¶è¿”å›keyåˆ—è¡¨çš„å°¾å…ƒç´ \nLRANGE  key  start  stop //è¿”å›åˆ—è¡¨keyä¸­æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼ŒåŒºé—´ä»¥åç§»é‡startå’ŒstopæŒ‡å®š\n\nBLPOP  key  [key ...]  timeout\t//ä»keyåˆ—è¡¨è¡¨å¤´å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œè‹¥åˆ—è¡¨ä¸­æ²¡æœ‰å…ƒç´ ï¼Œé˜»å¡ç­‰å¾…timeoutç§’,å¦‚æœtimeout=0,ä¸€ç›´é˜»å¡ç­‰å¾…\nBRPOP  key  [key ...]  timeout \t//ä»keyåˆ—è¡¨è¡¨å°¾å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œè‹¥åˆ—è¡¨ä¸­æ²¡æœ‰å…ƒç´ ï¼Œé˜»å¡ç­‰å¾…timeoutç§’,å¦‚æœtimeout=0,ä¸€ç›´é˜»å¡ç­‰å¾…\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"åº”ç”¨åœºæ™¯-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯-2"}},[s._v("#")]),s._v(" åº”ç”¨åœºæ™¯")]),s._v(" "),a("h4",{attrs:{id:"ç”¨äºæ•°æ®ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨äºæ•°æ®ç»“æ„"}},[s._v("#")]),s._v(" ç”¨äºæ•°æ®ç»“æ„")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829141109827.png",alt:"image-20210829141109827"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Stackæ ˆ) = LPUSH + LPOP\nQueue(é˜Ÿåˆ—ï¼‰= LPUSH + RPOP\nBlocking MQ(é˜»å¡é˜Ÿåˆ—ï¼‰= LPUSH + BRPOP\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"å¾®åšæ¶ˆæ¯å’Œå¾®ä¿¡å…¬å·æ¶ˆæ¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¾®åšæ¶ˆæ¯å’Œå¾®ä¿¡å…¬å·æ¶ˆæ¯"}},[s._v("#")]),s._v(" å¾®åšæ¶ˆæ¯å’Œå¾®ä¿¡å…¬å·æ¶ˆæ¯")]),s._v(" "),a("p",[s._v("è¯¸è‘›è€å¸ˆå…³æ³¨äº†MacTalkï¼Œå¤‡èƒè¯´è½¦ç­‰å¤§V")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1ï¼‰MacTalkå‘å¾®åšï¼Œæ¶ˆæ¯IDä¸º10018\nLPUSH msg:{è¯¸è‘›è€å¸ˆ-ID} 10018\n\n2ï¼‰å¤‡èƒè¯´è½¦å‘å¾®åšï¼Œæ¶ˆæ¯IDä¸º10086\nLPUSH msg:{è¯¸è‘›è€å¸ˆ-ID} 10086\n\n3ï¼‰æŸ¥çœ‹æœ€æ–°å¾®åšæ¶ˆæ¯\nLRANGE msg:{è¯¸è‘›è€å¸ˆ-ID} 0 4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829141356236.png",alt:"image-20210829141356236"}})]),s._v(" "),a("h3",{attrs:{id:"æºç åº•å±‚-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åº•å±‚-3"}},[s._v("#")]),s._v(" æºç åº•å±‚")]),s._v(" "),a("p",[s._v("Listæ˜¯ä¸€ä¸ªæœ‰åºï¼ˆæŒ‰åŠ å…¥çš„æ—¶åºæ’åºï¼‰çš„æ•°æ®ç»“æ„ï¼Œredisé‡‡ç”¨quicklistï¼ˆåŒç«¯é“¾è¡¨ï¼‰å’Œziplistä½œä¸ºListçš„åº•å±‚å®ç°ã€‚")]),s._v(" "),a("p",[s._v("å¯ä»¥é€šè¿‡è®¾ç½®æ¯ä¸ªziplistçš„æœ€å¤§å®¹é‡ï¼Œquiclistçš„æ•°æ®å‹ç¼©èŒƒå›´ï¼Œæå‡æ•°æ®å­˜å–æ•ˆç‡")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("list-max-ziplist-size  -2 //  å•ä¸ªziplistèŠ‚ç‚¹æœ€å¤§èƒ½å­˜å‚¨  8kb  ,è¶…è¿‡åˆ™è¿›è¡Œåˆ†è£‚,å°†æ•°æ®å­˜å‚¨åœ¨æ–°çš„ziplistèŠ‚ç‚¹ä¸­\nlist-compress-depth  1  //  0 ä»£è¡¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œéƒ½ä¸è¿›è¡Œå‹ç¼©ï¼Œ1ï¼Œ ä»£è¡¨ä»å¤´èŠ‚ç‚¹å¾€åèµ°ä¸€ä¸ªï¼Œå°¾èŠ‚ç‚¹å¾€å‰èµ°ä¸€ä¸ªä¸ç”¨å‹ç¼©ï¼Œå…¶ä»–çš„å…¨éƒ¨å‹ç¼©ï¼Œ2ï¼Œ3ï¼Œ4 ... ä»¥æ­¤ç±»æ¨\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829183533536.png",alt:"image-20210829183533536"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829183546560.png",alt:"image-20210829183546560"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829183654170.png",alt:"image-20210829183654170"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829183703080.png",alt:"image-20210829183703080"}})]),s._v(" "),a("h2",{attrs:{id:"set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#set"}},[s._v("#")]),s._v(" Set")]),s._v(" "),a("h3",{attrs:{id:"å¸¸ç”¨æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨æ“ä½œ"}},[s._v("#")]),s._v(" å¸¸ç”¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SADD  key  member  [member ...] //å¾€é›†åˆkeyä¸­å­˜å…¥å…ƒç´ ï¼Œå…ƒç´ å­˜åœ¨åˆ™å¿½ç•¥ï¼Œè‹¥keyä¸å­˜åœ¨åˆ™æ–°å»º\nSREM  key  member  [member ...]\t//ä»é›†åˆkeyä¸­åˆ é™¤å…ƒç´ \nSMEMBERS  key  //è·å–é›†åˆkeyä¸­æ‰€æœ‰å…ƒç´ \nSCARD  key\t//è·å–é›†åˆkeyçš„å…ƒç´ ä¸ªæ•°\nSISMEMBER  key  member\t//åˆ¤æ–­memberå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆkeyä¸­\nSRANDMEMBER  key  [count]//ä»é›†åˆkeyä¸­é€‰å‡ºcountä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸ä»keyä¸­åˆ é™¤\nSPOP  key  [count]//ä»é›†åˆkeyä¸­é€‰å‡ºcountä¸ªå…ƒç´ ï¼Œå…ƒç´ ä»keyä¸­åˆ é™¤\n\nSetè¿ç®—æ“ä½œ\nSINTER  key  [key ...]//äº¤é›†è¿ç®—\nSINTERSTORE  destination  key  [key ..]//å°†äº¤é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­\nSUNION  key  [key ..]//å¹¶é›†è¿ç®—\nSUNIONSTORE  destination  key  [key ...]//å°†å¹¶é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­\nSDIFF  key  [key ...]//å·®é›†è¿ç®—\nSDIFFSTORE  destination  key  [key ...]//å°†å·®é›†ç»“æœå­˜å…¥æ–°é›†åˆdestinationä¸­\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"åº”ç”¨åœºæ™¯-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯-3"}},[s._v("#")]),s._v(" åº”ç”¨åœºæ™¯")]),s._v(" "),a("h4",{attrs:{id:"å¾®ä¿¡æŠ½å¥–å°ç¨‹åº"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¾®ä¿¡æŠ½å¥–å°ç¨‹åº"}},[s._v("#")]),s._v(" å¾®ä¿¡æŠ½å¥–å°ç¨‹åº")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1ï¼‰ç‚¹å‡»å‚ä¸æŠ½å¥–åŠ å…¥é›†åˆ\nSADD key {userlD}\n2ï¼‰æŸ¥çœ‹å‚ä¸æŠ½å¥–æ‰€æœ‰ç”¨æˆ·\nSMEMBERS key\t  \n3ï¼‰æŠ½å–countåä¸­å¥–è€…\nSRANDMEMBER key [count] / SPOP key [count]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"å¾®ä¿¡å¾®åšç‚¹èµ-æ”¶è—-æ ‡ç­¾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¾®ä¿¡å¾®åšç‚¹èµ-æ”¶è—-æ ‡ç­¾"}},[s._v("#")]),s._v(" å¾®ä¿¡å¾®åšç‚¹èµï¼Œæ”¶è—ï¼Œæ ‡ç­¾")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1) ç‚¹èµ\nSADD  like:{æ¶ˆæ¯ID}  {ç”¨æˆ·ID}\n2) å–æ¶ˆç‚¹èµ\nSREM like:{æ¶ˆæ¯ID}  {ç”¨æˆ·ID}\n3) æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç‚¹è¿‡èµ\nSISMEMBER  like:{æ¶ˆæ¯ID}  {ç”¨æˆ·ID}\n4) è·å–ç‚¹èµçš„ç”¨æˆ·åˆ—è¡¨\nSMEMBERS like:{æ¶ˆæ¯ID}\n5) è·å–ç‚¹èµç”¨æˆ·æ•° \nSCARD like:{æ¶ˆæ¯ID}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"é›†åˆæ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é›†åˆæ“ä½œ"}},[s._v("#")]),s._v(" é›†åˆæ“ä½œ")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829142007066.png",alt:"image-20210829142007066"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SINTER set1 set2 set3 ïƒ  { c }\nSUNION set1 set2 set3 ïƒ  { a,b,c,d,e }\nSDIFF set1 set2 set3 ïƒ  { a }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"é›†åˆæ“ä½œå®ç°å¾®åš-å¾®ä¿¡å…³æ³¨æ¨¡å‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é›†åˆæ“ä½œå®ç°å¾®åš-å¾®ä¿¡å…³æ³¨æ¨¡å‹"}},[s._v("#")]),s._v(" é›†åˆæ“ä½œå®ç°å¾®åš/å¾®ä¿¡å…³æ³¨æ¨¡å‹")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829142109665.png",alt:"image-20210829142109665"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1) è¯¸è‘›è€å¸ˆå…³æ³¨çš„äºº: \nzhugeSet-> {guojia, xushu}\n2) æ¨è¿‡è€å¸ˆå…³æ³¨çš„äºº:\n yangguoSet--\x3e {zhuge, baiqi, guojia, xushu}\n3) éƒ­å˜‰è€å¸ˆå…³æ³¨çš„äºº: \nguojiaSet-> {zhuge, yangguo, baiqi, xushu, xunyu)\n4) æˆ‘å’Œæ¨è¿‡è€å¸ˆå…±åŒå…³æ³¨: \nSINTER zhugeSet yangguoSet--\x3e {guojia, xushu}\n5) æˆ‘å…³æ³¨çš„äººä¹Ÿå…³æ³¨ä»–(æ¨è¿‡è€å¸ˆ): \nSISMEMBER guojiaSet yangguo \nSISMEMBER xushuSet yangguo\n6) æˆ‘å¯èƒ½è®¤è¯†çš„äºº: \nSDIFF yangguoSet zhugeSet->(zhuge, baiqi}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h4",{attrs:{id:"é›†åˆæ“ä½œå®ç°ç”µå•†å•†å“ç­›é€‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é›†åˆæ“ä½œå®ç°ç”µå•†å•†å“ç­›é€‰"}},[s._v("#")]),s._v(" é›†åˆæ“ä½œå®ç°ç”µå•†å•†å“ç­›é€‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829142216697.png",alt:"image-20210829142216697"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SADD  brand:huawei  P40\nSADD  brand:xiaomi  mi-10\nSADD  brand:iPhone iphone12\nSADD os:android  P40  mi-10\nSADD cpu:brand:intel  P40  mi-10\nSADD ram:8G  P40  mi-10  iphone12\n\nSINTER  os:android  cpu:brand:intel  ram:8G ïƒ   {P40ï¼Œmi-10}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"æºç åº•å±‚-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åº•å±‚-4"}},[s._v("#")]),s._v(" æºç åº•å±‚")]),s._v(" "),a("p",[s._v("Set ä¸ºæ— åºçš„ï¼Œè‡ªåŠ¨å»é‡çš„é›†åˆæ•°æ®ç±»å‹ï¼ŒSet æ•°æ®ç»“æ„åº•å±‚å®ç°ä¸ºä¸€ä¸ªvalue ä¸º null çš„ å­—å…¸( dict ),å½“æ•°æ®å¯ä»¥ç”¨æ•´å½¢è¡¨ç¤ºæ—¶ï¼ŒSeté›†åˆå°†è¢«ç¼–ç ä¸ºintsetæ•°æ®ç»“æ„ã€‚ä¸¤ä¸ªæ¡ä»¶ä»»æ„æ»¡è¶³æ—¶Setå°†ç”¨hashtableå­˜å‚¨æ•°æ®ã€‚1ï¼Œ å…ƒç´ ä¸ªæ•°å¤§äº set-max-intset-entries , 2 ï¼Œ å…ƒç´ æ— æ³•ç”¨æ•´å½¢è¡¨ç¤º")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set-max-intset-entries 512       // intset èƒ½å­˜å‚¨çš„æœ€å¤§å…ƒç´ ä¸ªæ•°ï¼Œè¶…è¿‡åˆ™ç”¨hashtableç¼–ç \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184326533.png",alt:"image-20210829184326533"}})]),s._v(" "),a("h2",{attrs:{id:"zset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zset"}},[s._v("#")]),s._v(" ZSet")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829142340316.png",alt:"image-20210829142340316"}})]),s._v(" "),a("h3",{attrs:{id:"å¸¸ç”¨æ“ä½œ-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨æ“ä½œ-2"}},[s._v("#")]),s._v(" å¸¸ç”¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ZADD key score member [[score member]â€¦]\t//å¾€æœ‰åºé›†åˆkeyä¸­åŠ å…¥å¸¦åˆ†å€¼å…ƒç´ \nZREM key member [member â€¦]\t\t//ä»æœ‰åºé›†åˆkeyä¸­åˆ é™¤å…ƒç´ \nZSCORE key member \t\t\t//è¿”å›æœ‰åºé›†åˆkeyä¸­å…ƒç´ memberçš„åˆ†å€¼\nZINCRBY key increment member\t\t//ä¸ºæœ‰åºé›†åˆkeyä¸­å…ƒç´ memberçš„åˆ†å€¼åŠ ä¸Šincrement \nZCARD key\t\t\t\t//è¿”å›æœ‰åºé›†åˆkeyä¸­å…ƒç´ ä¸ªæ•°\nZRANGE key start stop [WITHSCORES]\t//æ­£åºè·å–æœ‰åºé›†åˆkeyä»startä¸‹æ ‡åˆ°stopä¸‹æ ‡çš„å…ƒç´ \nZREVRANGE key start stop [WITHSCORES]\t//å€’åºè·å–æœ‰åºé›†åˆkeyä»startä¸‹æ ‡åˆ°stopä¸‹æ ‡çš„å…ƒç´ \n\nZseté›†åˆæ“ä½œ\nZUNIONSTORE destkey numkeys key [key ...] \t//å¹¶é›†è®¡ç®—\nZINTERSTORE destkey numkeys key [key â€¦]\t//äº¤é›†è®¡ç®—\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"åº”ç”¨åœºæ™¯-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯-4"}},[s._v("#")]),s._v(" åº”ç”¨åœºæ™¯")]),s._v(" "),a("h4",{attrs:{id:"zseté›†åˆæ“ä½œå®ç°æ’è¡Œæ¦œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zseté›†åˆæ“ä½œå®ç°æ’è¡Œæ¦œ"}},[s._v("#")]),s._v(" ZSeté›†åˆæ“ä½œå®ç°æ’è¡Œæ¦œ")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1ï¼‰ç‚¹å‡»æ–°é—»\nZINCRBY  hotNews:20190819  1  å®ˆæŠ¤é¦™æ¸¯\n2ï¼‰å±•ç¤ºå½“æ—¥æ’è¡Œå‰å\nZREVRANGE  hotNews:20190819  0  9  WITHSCORES \n3ï¼‰ä¸ƒæ—¥æœç´¢æ¦œå•è®¡ç®—\nZUNIONSTORE  hotNews:20190813-20190819  7 \nhotNews:20190813  hotNews:20190814... hotNews:20190819\n4ï¼‰å±•ç¤ºä¸ƒæ—¥æ’è¡Œå‰å\nZREVRANGE hotNews:20190813-20190819  0  9  WITHSCORES\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829142441846.png",alt:"image-20210829142441846"}})]),s._v(" "),a("h3",{attrs:{id:"æºç åº•å±‚-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æºç åº•å±‚-5"}},[s._v("#")]),s._v(" æºç åº•å±‚")]),s._v(" "),a("p",[s._v("ZSet ä¸ºæœ‰åºçš„ï¼Œè‡ªåŠ¨å»é‡çš„é›†åˆæ•°æ®ç±»å‹ï¼ŒZSet æ•°æ®ç»“æ„åº•å±‚å®ç°ä¸º å­—å…¸(dict) + è·³è¡¨(skiplist) ,å½“æ•°æ®æ¯”è¾ƒå°‘æ—¶ï¼Œç”¨ziplistç¼–ç ç»“æ„å­˜å‚¨ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184425050.png",alt:"image-20210829184425050"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("zset-max-ziplist-entries  128    // å…ƒç´ ä¸ªæ•°è¶…è¿‡128 ï¼Œå°†ç”¨skiplistç¼–ç \nzset-max-ziplist-value     64     //  å•ä¸ªå…ƒç´ å¤§å°è¶…è¿‡ 64 byte, å°†ç”¨ skiplistç¼–ç \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("Zsetæ•°æ®ç»“æ„")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Zset æ•°æ®ç»“æ„\n//Â åˆ›å»ºzsetÂ æ•°æ®ç»“æ„:Â å­—å…¸Â +Â è·³è¡¨\nrobjÂ *createZsetObject(void)Â {\nÂ Â Â Â zsetÂ *zsÂ =Â zmalloc(sizeof(*zs));\nÂ Â Â Â robjÂ *o;\nÂ Â Â Â //Â dictç”¨æ¥æŸ¥è¯¢æ•°æ®åˆ°åˆ†æ•°çš„å¯¹åº”å…³ç³»ï¼ŒÂ å¦‚Â zscoreÂ å°±å¯ä»¥ç›´æ¥æ ¹æ®Â å…ƒç´ æ‹¿åˆ°åˆ†å€¼Â \nÂ Â Â Â zs->dictÂ =Â dictCreate(&zsetDictType,NULL);\nÂ Â Â Â \nÂ Â Â Â //Â skiplistç”¨æ¥æ ¹æ®åˆ†æ•°æŸ¥è¯¢æ•°æ®ï¼ˆå¯èƒ½æ˜¯èŒƒå›´æŸ¥æ‰¾ï¼‰\nÂ Â Â Â zs->zslÂ =Â zslCreate();\n\vÂ Â Â Â //Â è®¾ç½®å¯¹è±¡ç±»å‹Â \nÂ Â Â Â oÂ =Â createObject(OBJ_ZSET,zs);\n\vÂ Â Â Â Â //Â è®¾ç½®ç¼–ç ç±»å‹Â \nÂ Â Â Â o->encodingÂ =Â OBJ_ENCODING_SKIPLIST;\nÂ Â Â Â returnÂ o;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("typedefÂ structÂ zskiplistNodeÂ {\nÂ Â Â Â sdsÂ ele;\nÂ Â Â Â doubleÂ score;\nÂ Â Â Â structÂ zskiplistNodeÂ *backward;\nÂ Â Â Â structÂ zskiplistLevelÂ {\nÂ Â Â Â Â Â Â Â structÂ zskiplistNodeÂ *forward;\nÂ Â Â Â Â Â Â Â unsignedÂ longÂ span;\nÂ Â Â Â }Â level[];\n}Â zskiplistNode;\n\vtypedefÂ structÂ zskiplistÂ {\nÂ Â Â Â structÂ zskiplistNodeÂ *header,Â *tail;\nÂ Â Â Â unsignedÂ longÂ length;\nÂ Â Â Â intÂ level;\n}Â zskiplist;\n\vtypedefÂ structÂ zsetÂ {\nÂ Â Â Â dictÂ *dict;\nÂ Â Â Â zskiplistÂ *zsl;\n}Â zset;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h2",{attrs:{id:"skiplist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#skiplist"}},[s._v("#")]),s._v(" skiplist")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184700442.png",alt:"image-20210829184700442"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184709936.png",alt:"image-20210829184709936"}})]),s._v(" "),a("p",[a("strong",[s._v("åŸç†")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/skiplist.png",alt:""}})]),s._v(" "),a("p",[s._v("å›¾äºŒï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/skiplist.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"bitmap-todo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bitmap-todo"}},[s._v("#")]),s._v(" BitMap TODO")]),s._v(" "),a("h2",{attrs:{id:"å…¶ä»–é«˜çº§å‘½ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–é«˜çº§å‘½ä»¤"}},[s._v("#")]),s._v(" å…¶ä»–é«˜çº§å‘½ä»¤")]),s._v(" "),a("h3",{attrs:{id:"keys"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keys"}},[s._v("#")]),s._v(" keys")]),s._v(" "),a("p",[a("strong",[s._v("keysï¼šå…¨é‡éå†é”®")]),s._v("ï¼Œç”¨æ¥åˆ—å‡ºæ‰€æœ‰æ»¡è¶³ç‰¹å®šæ­£åˆ™å­—ç¬¦ä¸²è§„åˆ™çš„keyï¼Œå½“redisæ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œæ€§èƒ½æ¯”è¾ƒå·®ï¼Œè¦é¿å…ä½¿ç”¨")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/9.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"scan"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scan"}},[s._v("#")]),s._v(" scan")]),s._v(" "),a("p",[a("strong",[s._v("scanï¼šæ¸è¿›å¼éå†é”®")])]),s._v(" "),a("p",[s._v("SCAN cursor [MATCH pattern] [COUNT count]")]),s._v(" "),a("p",[s._v("scan å‚æ•°æä¾›äº†ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ cursor æ•´æ•°å€¼(hashæ¡¶çš„ç´¢å¼•å€¼)ï¼Œç¬¬äºŒä¸ªæ˜¯ key çš„æ­£åˆ™æ¨¡å¼ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸€æ¬¡éå†çš„keyçš„æ•°é‡(å‚è€ƒå€¼ï¼Œåº•å±‚éå†çš„æ•°é‡ä¸ä¸€å®š)ï¼Œå¹¶ä¸æ˜¯ç¬¦åˆæ¡ä»¶çš„ç»“æœæ•°é‡ã€‚ç¬¬ä¸€æ¬¡éå†æ—¶ï¼Œcursor å€¼ä¸º 0ï¼Œç„¶åå°†è¿”å›ç»“æœä¸­ç¬¬ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºä¸‹ä¸€æ¬¡éå†çš„ cursorã€‚ä¸€ç›´éå†åˆ°è¿”å›çš„ cursor å€¼ä¸º 0 æ—¶ç»“æŸã€‚")]),s._v(" "),a("p",[s._v("æ³¨æ„ï¼šä½†æ˜¯scanå¹¶éå®Œç¾æ— ç‘•ï¼Œ å¦‚æœåœ¨scançš„è¿‡ç¨‹ä¸­å¦‚æœæœ‰é”®çš„å˜åŒ–ï¼ˆå¢åŠ ã€ åˆ é™¤ã€ ä¿®æ”¹ï¼‰ ï¼Œé‚£ä¹ˆéå†æ•ˆæœå¯èƒ½ä¼šç¢°åˆ°å¦‚ä¸‹é—®é¢˜ï¼š æ–°å¢çš„é”®å¯èƒ½æ²¡æœ‰éå†åˆ°ï¼Œ éå†å‡ºäº†é‡å¤çš„é”®ç­‰æƒ…å†µï¼Œ ä¹Ÿå°±æ˜¯è¯´scanå¹¶ä¸èƒ½ä¿è¯å®Œæ•´çš„éå†å‡ºæ¥æ‰€æœ‰çš„é”®ï¼Œ è¿™äº›æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æ—¶éœ€è¦è€ƒè™‘çš„ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/10.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/11.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#info"}},[s._v("#")]),s._v(" info")]),s._v(" "),a("p",[a("strong",[s._v("Infoï¼šæŸ¥çœ‹redisæœåŠ¡è¿è¡Œä¿¡æ¯ï¼Œåˆ†ä¸º 9 å¤§å—ï¼Œæ¯ä¸ªå—éƒ½æœ‰éå¸¸å¤šçš„å‚æ•°ï¼Œè¿™ 9 ä¸ªå—åˆ†åˆ«æ˜¯:")])]),s._v(" "),a("p",[s._v("Server æœåŠ¡å™¨è¿è¡Œçš„ç¯å¢ƒå‚æ•°")]),s._v(" "),a("p",[s._v("Clients å®¢æˆ·ç«¯ç›¸å…³ä¿¡æ¯")]),s._v(" "),a("p",[s._v("Memory æœåŠ¡å™¨è¿è¡Œå†…å­˜ç»Ÿè®¡æ•°æ®")]),s._v(" "),a("p",[s._v("Persistence æŒä¹…åŒ–ä¿¡æ¯")]),s._v(" "),a("p",[s._v("Stats é€šç”¨ç»Ÿè®¡æ•°æ®")]),s._v(" "),a("p",[s._v("Replication ä¸»ä»å¤åˆ¶ç›¸å…³ä¿¡æ¯")]),s._v(" "),a("p",[s._v("CPU CPU ä½¿ç”¨æƒ…å†µ")]),s._v(" "),a("p",[s._v("Cluster é›†ç¾¤ä¿¡æ¯")]),s._v(" "),a("p",[s._v("KeySpace é”®å€¼å¯¹ç»Ÿè®¡æ•°é‡ä¿¡æ¯")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://404500.oss-cn-beijing.aliyuncs.com/picture/redis/12.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("connected_clients:2                  # æ­£åœ¨è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡\n\ninstantaneous_ops_per_sec:789        # æ¯ç§’æ‰§è¡Œå¤šå°‘æ¬¡æŒ‡ä»¤\n\nused_memory:929864                   # Redisåˆ†é…çš„å†…å­˜æ€»é‡(byte)ï¼ŒåŒ…å«redisè¿›ç¨‹å†…éƒ¨çš„å¼€é”€å’Œæ•°æ®å ç”¨çš„å†…å­˜\nused_memory_human:908.07K            # Redisåˆ†é…çš„å†…å­˜æ€»é‡(Kbï¼Œhumanä¼šå±•ç¤ºå‡ºå•ä½)\nused_memory_rss_human:2.28M          # å‘æ“ä½œç³»ç»Ÿç”³è¯·çš„å†…å­˜å¤§å°(Mb)ï¼ˆè¿™ä¸ªå€¼ä¸€èˆ¬æ˜¯å¤§äºused_memoryçš„ï¼Œå› ä¸ºRedisçš„å†…å­˜åˆ†é…ç­–ç•¥ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼‰\nused_memory_peak:929864              # redisçš„å†…å­˜æ¶ˆè€—å³°å€¼(byte)\nused_memory_peak_human:908.07K       # redisçš„å†…å­˜æ¶ˆè€—å³°å€¼(KB)\n\nmaxmemory:0                         # é…ç½®ä¸­è®¾ç½®çš„æœ€å¤§å¯ä½¿ç”¨å†…å­˜å€¼(byte),é»˜è®¤0,ä¸é™åˆ¶\nmaxmemory_human:0B                  # é…ç½®ä¸­è®¾ç½®çš„æœ€å¤§å¯ä½¿ç”¨å†…å­˜å€¼\nmaxmemory_policy:noeviction         # å½“è¾¾åˆ°maxmemoryæ—¶çš„æ·˜æ±°ç­–ç•¥\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"ç®¡é“-pipeline"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç®¡é“-pipeline"}},[s._v("#")]),s._v(" ç®¡é“ï¼ˆPipelineï¼‰")]),s._v(" "),a("p",[s._v("å®¢æˆ·ç«¯å¯ä»¥ä¸€æ¬¡æ€§å‘é€å¤šä¸ªè¯·æ±‚è€Œä¸ç”¨ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œå¾…æ‰€æœ‰å‘½ä»¤éƒ½å‘é€å®Œåå†ä¸€æ¬¡æ€§è¯»å–æœåŠ¡çš„å“åº”ï¼Œè¿™æ ·å¯ä»¥æå¤§çš„é™ä½å¤šæ¡å‘½ä»¤æ‰§è¡Œçš„ç½‘ç»œä¼ è¾“å¼€é”€ï¼Œç®¡é“æ‰§è¡Œå¤šæ¡å‘½ä»¤çš„ç½‘ç»œå¼€é”€å®é™…ä¸Šåªç›¸å½“äºä¸€æ¬¡å‘½ä»¤æ‰§è¡Œçš„ç½‘ç»œå¼€é”€ã€‚éœ€è¦æ³¨æ„åˆ°æ˜¯ç”¨pipelineæ–¹å¼æ‰“åŒ…å‘½ä»¤å‘é€ï¼Œrediså¿…é¡»åœ¨"),a("strong",[s._v("å¤„ç†å®Œæ‰€æœ‰å‘½ä»¤å‰å…ˆç¼“å­˜èµ·æ‰€æœ‰å‘½ä»¤çš„å¤„ç†ç»“æœ")]),s._v("ã€‚æ‰“åŒ…çš„å‘½ä»¤è¶Šå¤šï¼Œç¼“å­˜æ¶ˆè€—å†…å­˜ä¹Ÿè¶Šå¤šã€‚æ‰€ä»¥å¹¶ä¸æ˜¯æ‰“åŒ…çš„å‘½ä»¤è¶Šå¤šè¶Šå¥½ã€‚")]),s._v(" "),a("p",[s._v("pipelineä¸­å‘é€çš„æ¯ä¸ªcommandéƒ½ä¼šè¢«serverç«‹å³æ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå°†ä¼šåœ¨æ­¤åçš„å“åº”ä¸­å¾—åˆ°ä¿¡æ¯ï¼›ä¹Ÿå°±æ˜¯pipelineå¹¶ä¸æ˜¯è¡¨è¾¾â€œæ‰€æœ‰commandéƒ½ä¸€èµ·æˆåŠŸâ€çš„è¯­ä¹‰ï¼Œç®¡é“ä¸­å‰é¢å‘½ä»¤å¤±è´¥ï¼Œåé¢å‘½ä»¤ä¸ä¼šæœ‰å½±å“ï¼Œç»§ç»­æ‰§è¡Œã€‚")]),s._v(" "),a("p",[s._v("è¯¦ç»†ä»£ç ç¤ºä¾‹è§ä¸Šé¢jedisè¿æ¥ç¤ºä¾‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('Pipeline pl = jedis.pipelined();\nfor (int i = 0; i < 10; i++) {\n    pl.incr("pipelineKey");\n    pl.set("zhuge" + i, "zhuge");\n    //æ¨¡æ‹Ÿç®¡é“æŠ¥é”™\n    // pl.setbit("zhuge", -1, true);\n}\nList<Object> results = pl.syncAndReturnAll();\nSystem.out.println(results);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"redis-luaè„šæœ¬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis-luaè„šæœ¬"}},[s._v("#")]),s._v(" Redis Luaè„šæœ¬")]),s._v(" "),a("p",[s._v("Redisåœ¨2.6æ¨å‡ºäº†è„šæœ¬åŠŸèƒ½ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨Luaè¯­è¨€ç¼–å†™è„šæœ¬ä¼ åˆ°Redisä¸­æ‰§è¡Œã€‚ä½¿ç”¨è„šæœ¬çš„å¥½å¤„å¦‚ä¸‹:")]),s._v(" "),a("p",[s._v("1ã€"),a("strong",[s._v("å‡å°‘ç½‘ç»œå¼€é”€")]),s._v("ï¼šæœ¬æ¥5æ¬¡ç½‘ç»œè¯·æ±‚çš„æ“ä½œï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼ŒåŸå…ˆ5æ¬¡è¯·æ±‚çš„é€»è¾‘æ”¾åœ¨redisæœåŠ¡å™¨ä¸Šå®Œæˆã€‚ä½¿ç”¨è„šæœ¬ï¼Œå‡å°‘äº†ç½‘ç»œå¾€è¿”æ—¶å»¶ã€‚"),a("strong",[s._v("è¿™ç‚¹è·Ÿç®¡é“ç±»ä¼¼")]),s._v("ã€‚")]),s._v(" "),a("p",[s._v("2ã€"),a("strong",[s._v("åŸå­æ“ä½œ")]),s._v("ï¼šRedisä¼šå°†æ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ’å…¥ã€‚"),a("strong",[s._v("ç®¡é“ä¸æ˜¯åŸå­çš„ï¼Œä¸è¿‡redisçš„æ‰¹é‡æ“ä½œå‘½ä»¤(ç±»ä¼¼mset)æ˜¯åŸå­çš„ã€‚")])]),s._v(" "),a("p",[s._v("3ã€"),a("strong",[s._v("æ›¿ä»£redisçš„äº‹åŠ¡åŠŸèƒ½")]),s._v("ï¼šredisè‡ªå¸¦çš„äº‹åŠ¡åŠŸèƒ½å¾ˆé¸¡è‚‹ï¼Œè€Œredisçš„luaè„šæœ¬å‡ ä¹å®ç°äº†å¸¸è§„çš„äº‹åŠ¡åŠŸèƒ½ï¼Œå®˜æ–¹æ¨èå¦‚æœè¦ä½¿ç”¨redisçš„äº‹åŠ¡åŠŸèƒ½å¯ä»¥ç”¨redis luaæ›¿ä»£ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("å®˜ç½‘æ–‡æ¡£ä¸Šæœ‰è¿™æ ·ä¸€æ®µè¯ï¼š")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("A Redis script is transactional by definition, so everything you can do with a Redis transaction, you can also do with a script, \nand usually the script will be both simpler and faster.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("ä»Redis2.6.0ç‰ˆæœ¬å¼€å§‹ï¼Œé€šè¿‡å†…ç½®çš„Luaè§£é‡Šå™¨ï¼Œå¯ä»¥ä½¿ç”¨EVALå‘½ä»¤å¯¹Luaè„šæœ¬è¿›è¡Œæ±‚å€¼ã€‚EVALå‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("EVAL script numkeys key [key ...] arg [arg ...]ã€€\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("scriptå‚æ•°æ˜¯ä¸€æ®µLuaè„šæœ¬ç¨‹åºï¼Œå®ƒä¼šè¢«è¿è¡Œåœ¨RedisæœåŠ¡å™¨ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™æ®µè„šæœ¬"),a("strong",[s._v("ä¸å¿…(ä¹Ÿä¸åº”è¯¥)å®šä¹‰ä¸ºä¸€ä¸ªLuaå‡½æ•°")]),s._v("ã€‚numkeyså‚æ•°ç”¨äºæŒ‡å®šé”®åå‚æ•°çš„ä¸ªæ•°ã€‚é”®åå‚æ•° key [key ...] ä»EVALçš„ç¬¬ä¸‰ä¸ªå‚æ•°å¼€å§‹ç®—èµ·ï¼Œè¡¨ç¤ºåœ¨è„šæœ¬ä¸­æ‰€ç”¨åˆ°çš„é‚£äº›Redisé”®(key)ï¼Œè¿™äº›é”®åå‚æ•°å¯ä»¥åœ¨ Luaä¸­é€šè¿‡å…¨å±€å˜é‡KEYSæ•°ç»„ï¼Œç”¨1ä¸ºåŸºå€çš„å½¢å¼è®¿é—®( KEYS[1] ï¼Œ KEYS[2] ï¼Œä»¥æ­¤ç±»æ¨)ã€‚")]),s._v(" "),a("p",[s._v("åœ¨å‘½ä»¤çš„æœ€åï¼Œé‚£äº›ä¸æ˜¯é”®åå‚æ•°çš„é™„åŠ å‚æ•° arg [arg ...] ï¼Œå¯ä»¥åœ¨Luaä¸­é€šè¿‡å…¨å±€å˜é‡"),a("strong",[s._v("ARGV")]),s._v("æ•°ç»„è®¿é—®ï¼Œè®¿é—®çš„å½¢å¼å’ŒKEYSå˜é‡ç±»ä¼¼( ARGV[1] ã€ ARGV[2] ï¼Œè¯¸å¦‚æ­¤ç±»)ã€‚ä¾‹å¦‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('127.0.0.1:6379> eval "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}" 2 key1 key2 first second\n1) "key1"\n2) "key2"\n3) "first"\n4) "second"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v('å…¶ä¸­ "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}" æ˜¯è¢«æ±‚å€¼çš„Luaè„šæœ¬ï¼Œæ•°å­—2æŒ‡å®šäº†é”®åå‚æ•°çš„æ•°é‡ï¼Œ key1å’Œkey2æ˜¯é”®åå‚æ•°ï¼Œåˆ†åˆ«ä½¿ç”¨ KEYS[1] å’Œ KEYS[2] è®¿é—®ï¼Œè€Œæœ€åçš„ first å’Œ second åˆ™æ˜¯é™„åŠ å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ ARGV[1] å’Œ ARGV[2] è®¿é—®å®ƒä»¬ã€‚')]),s._v(" "),a("p",[s._v("åœ¨ Lua è„šæœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨**redis.call()**å‡½æ•°æ¥æ‰§è¡ŒRediså‘½ä»¤")]),s._v(" "),a("p",[s._v("Jedisè°ƒç”¨ç¤ºä¾‹è¯¦è§ä¸Šé¢jedisè¿æ¥ç¤ºä¾‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('jedis.set("product_stock_10016", "15");  //åˆå§‹åŒ–å•†å“10016çš„åº“å­˜\nString script = " local count = redis.call(\'get\', KEYS[1]) " +\n                " local a = tonumber(count) " +\n                " local b = tonumber(ARGV[1]) " +\n                " if a >= b then " +\n                "   redis.call(\'set\', KEYS[1], a-b) " +\n                "   return 1 " +\n                " end " +\n                " return 0 ";\nObject obj = jedis.eval(script, Arrays.asList("product_stock_10016"), Arrays.asList("10"));\nSystem.out.println(obj);\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„ï¼Œä¸è¦åœ¨Luaè„šæœ¬ä¸­å‡ºç°æ­»å¾ªç¯å’Œè€—æ—¶çš„è¿ç®—ï¼Œå¦åˆ™redisä¼šé˜»å¡ï¼Œå°†ä¸æ¥å—å…¶ä»–çš„å‘½ä»¤ï¼Œ æ‰€ä»¥ä½¿ç”¨æ—¶è¦æ³¨æ„ä¸èƒ½å‡ºç°æ­»å¾ªç¯ã€è€—æ—¶çš„è¿ç®—ã€‚redisæ˜¯å•è¿›ç¨‹ã€å•çº¿ç¨‹æ‰§è¡Œè„šæœ¬ã€‚ç®¡é“ä¸ä¼šé˜»å¡redisã€‚")])]),s._v(" "),a("h2",{attrs:{id:"geohashç®—æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geohashç®—æ³•"}},[s._v("#")]),s._v(" GeoHashç®—æ³•")]),s._v(" "),a("p",[s._v("GeoHashæ˜¯ä¸€ç§åœ°ç†ä½ç½®ç¼–ç æ–¹æ³•ã€‚ ç”±Gustavo Niemeyer å’Œ G.M. Mortonäº2008å¹´å‘æ˜ï¼Œå®ƒå°†åœ°ç†ä½ç½®ç¼–ç ä¸ºä¸€ä¸²ç®€çŸ­çš„å­—æ¯å’Œæ•°å­—ã€‚å®ƒæ˜¯ä¸€ç§åˆ†å±‚çš„ç©ºé—´æ•°æ®ç»“æ„ï¼Œå°†ç©ºé—´ç»†åˆ†ä¸ºç½‘æ ¼å½¢çŠ¶çš„æ¡¶ï¼Œè¿™æ˜¯æ‰€è°“çš„zé¡ºåºæ›²çº¿çš„ä¼—å¤šåº”ç”¨ä¹‹ä¸€ï¼Œé€šå¸¸æ˜¯ç©ºé—´å¡«å……æ›²çº¿ã€‚")]),s._v(" "),a("h3",{attrs:{id:"geohashç»çº¬åº¦ç¼–ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geohashç»çº¬åº¦ç¼–ç "}},[s._v("#")]),s._v(" GeoHashç»çº¬åº¦ç¼–ç ")]),s._v(" "),a("p",[s._v("ç»åº¦èŒƒå›´æ˜¯ä¸œç»180åˆ°è¥¿ç»180ï¼Œçº¬åº¦èŒƒå›´æ˜¯å—çº¬90åˆ°åŒ—çº¬90ï¼Œæˆ‘ä»¬è®¾å®šè¥¿ç»ä¸ºè´Ÿï¼Œå—çº¬ä¸ºè´Ÿï¼Œæ‰€ä»¥åœ°çƒä¸Šçš„ç»åº¦èŒƒå›´å°±æ˜¯[-180ï¼Œ 180]ï¼Œçº¬åº¦èŒƒå›´å°±æ˜¯[-90ï¼Œ90]ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœä»¥æœ¬åˆå­åˆçº¿ã€èµ¤é“ä¸ºç•Œï¼Œåœ°çƒå¯ä»¥åˆ†æˆ4ä¸ªéƒ¨åˆ†ã€‚")]),s._v(" "),a("p",[s._v("å¦‚æœçº¬åº¦èŒƒå›´[-90Â°, 0Â°)ç”¨äºŒè¿›åˆ¶0ä»£è¡¨ï¼Œï¼ˆ0Â°, 90Â°]ç”¨äºŒè¿›åˆ¶1ä»£è¡¨ï¼Œç»åº¦èŒƒå›´[-180Â°, 0Â°)ç”¨äºŒè¿›åˆ¶0ä»£è¡¨ï¼Œï¼ˆ0Â°, 180Â°]ç”¨äºŒè¿›åˆ¶1ä»£è¡¨ï¼Œé‚£ä¹ˆåœ°çƒå¯ä»¥åˆ†æˆå¦‚ä¸‹(å·¦å›¾ )4ä¸ªéƒ¨åˆ†")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829184910984.png",alt:"image-20210829184910984"}})]),s._v(" "),a("p",[s._v("é€šè¿‡GeoHashç®—æ³•ï¼Œå¯ä»¥å°†ç»çº¬åº¦çš„äºŒç»´åæ ‡å˜æˆä¸€ä¸ªå¯æ’åºã€å¯æ¯”è¾ƒçš„çš„å­—ç¬¦ä¸²ç¼–ç ã€‚ åœ¨ç¼–ç ä¸­çš„æ¯ä¸ªå­—ç¬¦ä»£è¡¨ä¸€ä¸ªåŒºåŸŸï¼Œå¹¶ä¸”å‰é¢çš„å­—ç¬¦æ˜¯åé¢å­—ç¬¦çš„çˆ¶åŒºåŸŸã€‚")]),s._v(" "),a("p",[a("strong",[s._v("å…¶ç®—æ³•çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š")])]),s._v(" "),a("p",[s._v("æ ¹æ®GeoHash æ¥è®¡ç®—çº¬åº¦çš„ äºŒè¿›åˆ¶ç¼–ç ")]),s._v(" "),a("p",[s._v("åœ°çƒçº¬åº¦åŒºé—´æ˜¯[-90,90]ï¼Œ å¦‚æŸçº¬åº¦æ˜¯39.92324ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢ç®—æ³•æ¥è¿›è¡Œç»´åº¦ç¼–ç :")]),s._v(" "),a("p",[s._v("1ï¼‰åŒºé—´[-90,90]è¿›è¡ŒäºŒåˆ†ä¸º[-90,0),[0,90]ï¼Œç§°ä¸ºå·¦å³åŒºé—´ï¼Œå¯ä»¥ç¡®å®š39.92324å±äºå³åŒºé—´[0,90]ï¼Œç»™æ ‡è®°ä¸º1")]),s._v(" "),a("p",[s._v("2ï¼‰æ¥ç€å°†åŒºé—´[0,90]è¿›è¡ŒäºŒåˆ†ä¸º [0,45),[45,90]ï¼Œå¯ä»¥ç¡®å®š39.92324å±äºå·¦åŒºé—´ [0,45)ï¼Œç»™æ ‡è®°ä¸º0")]),s._v(" "),a("p",[s._v("3ï¼‰é€’å½’ä¸Šè¿°è¿‡ç¨‹39.92324æ€»æ˜¯å±äºæŸä¸ªåŒºé—´[a,b]ã€‚éšç€æ¯æ¬¡è¿­ä»£åŒºé—´[a,b]æ€»åœ¨ç¼©å°ï¼Œå¹¶è¶Šæ¥è¶Šé€¼è¿‘39.928167")]),s._v(" "),a("p",[s._v("4ï¼‰å¦‚æœç»™å®šçš„çº¬åº¦ï¼ˆ39.92324ï¼‰å±äºå·¦åŒºé—´ï¼Œåˆ™è®°å½•0ï¼Œå¦‚æœå±äºå³åŒºé—´åˆ™è®°å½•1ï¼Œè¿™æ ·éšç€ç®—æ³•çš„è¿›è¡Œä¼šäº§ç”Ÿä¸€ä¸ªåºåˆ—1011 1000 1100 0111 1001ï¼Œåºåˆ—çš„é•¿åº¦è·Ÿç»™å®šçš„åŒºé—´åˆ’åˆ†æ¬¡æ•°æœ‰å…³ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829185118746.png",alt:"image-20210829185118746"}})]),s._v(" "),a("p",[s._v("æœ€åä½¿ç”¨ç”¨0-9ã€b-zï¼ˆå»æ‰a, i, l, oï¼‰è¿™32ä¸ªå­—æ¯è¿›è¡Œbase32ç¼–ç ï¼Œé¦–å…ˆå°†11100 11101 00100 01111 00000 01101 01011 00001è½¬æˆåè¿›åˆ¶ 28ï¼Œ29ï¼Œ4ï¼Œ15ï¼Œ0ï¼Œ13ï¼Œ11ï¼Œ1ï¼Œåè¿›åˆ¶å¯¹åº”çš„ç¼–ç å°±æ˜¯wx4g0ec1ã€‚åŒç†ï¼Œå°†ç¼–ç è½¬æ¢æˆç»çº¬åº¦çš„è§£ç ç®—æ³•ä¸ä¹‹ç›¸å")]),s._v(" "),a("p",[a("img",{attrs:{src:"C:%5CUsers%5CNO%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210829185144362.png",alt:"image-20210829185144362"}})]),s._v(" "),a("h3",{attrs:{id:"geohashä¼˜ç¼º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geohashä¼˜ç¼º"}},[s._v("#")]),s._v(" GeoHashä¼˜ç¼º")]),s._v(" "),a("ul",[a("li",[s._v("ä¼˜ç‚¹ï¼š")])]),s._v(" "),a("p",[s._v("GeoHashåˆ©ç”¨Zé˜¶æ›²çº¿è¿›è¡Œç¼–ç ï¼ŒZé˜¶æ›²çº¿å¯ä»¥å°†äºŒç»´æ‰€æœ‰ç‚¹éƒ½è½¬æ¢æˆä¸€é˜¶æ›²çº¿ã€‚åœ°ç†ä½ç½®åæ ‡ç‚¹é€šè¿‡ç¼–ç è½¬åŒ–æˆä¸€ç»´å€¼ï¼Œåˆ©ç”¨ æœ‰åºæ•°æ®ç»“æ„å¦‚Bæ ‘ã€SkipListç­‰ï¼Œå‡å¯è¿›è¡ŒèŒƒå›´æœç´¢ã€‚å› æ­¤åˆ©ç”¨GeoHashç®—æ³•æŸ¥æ‰¾é‚»è¿‘ç‚¹æ¯”è¾ƒå¿«")]),s._v(" "),a("ul",[a("li",[s._v("ç¼ºç‚¹ï¼š")])]),s._v(" "),a("p",[s._v("Z é˜¶æ›²çº¿æœ‰ä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œè™½ç„¶æœ‰å±€éƒ¨ä¿åºæ€§ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰çªå˜æ€§ã€‚åœ¨æ¯ä¸ª Z å­—æ¯çš„æ‹è§’ï¼Œéƒ½æœ‰å¯èƒ½å‡ºç°é¡ºåºçš„çªå˜ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);