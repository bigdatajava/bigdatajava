(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{424:function(t,s,a){"use strict";a.r(s);var e=a(1),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-概念"}},[t._v("#")]),t._v(" 1.概念")]),t._v(" "),s("ul",[s("li",[t._v("工作流：是对工作流程及其各操作步骤之间业务规则的抽象概括描述")]),t._v(" "),s("li",[t._v("工作流建模：即将工作流程中的工作如何，前后组织在一起的逻辑和规则。在计算机中以恰当的模型表达并对其实施计算。")]),t._v(" "),s("li",[t._v("工作流目地：是要解决的问题，是为了实现某个业务目标。利用计算机在多个参与者之间按某种预定规则自动传递文档信息或者任务")])]),t._v(" "),s("h2",{attrs:{id:"_2-快速部署环境体验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-快速部署环境体验"}},[t._v("#")]),t._v(" 2.快速部署环境体验")]),t._v(" "),s("h3",{attrs:{id:"_2-1-搭建环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-搭建环境"}},[t._v("#")]),t._v(" 2.1 搭建环境")]),t._v(" "),s("ul",[s("li",[t._v("官网下载tomcat和activiti6")]),t._v(" "),s("li",[t._v("将activiti-6.0.0/wars下的activiti-admin.war/acitivi-app.war/activi-rest.war三个文件拷贝到tomcat的webapp目录下，启动tomcat")]),t._v(" "),s("li",[t._v("登陆网址"),s("code",[t._v("http://localhost:8080/activiti-app")]),t._v("（admin/test）")])]),t._v(" "),s("blockquote",[s("p",[t._v("目标：制作一个二级审批流程,用户userliu提出请假审批 -> userhr审批 -> userboss审批 ->结束")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-登陆系统-创建流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-登陆系统-创建流程"}},[t._v("#")]),t._v(" 2.2 登陆系统，创建流程")]),t._v(" "),s("h4",{attrs:{id:"_2-2-1-创建用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-创建用户"}},[t._v("#")]),t._v(" 2.2.1 创建用户")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329202200346.gif#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_2-2-2-创建流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-创建流程"}},[t._v("#")]),t._v(" 2.2.2 创建流程")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329211139351.gif#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_2-2-3-创建审批流程app-并发布使其生效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-创建审批流程app-并发布使其生效"}},[t._v("#")]),t._v(" 2.2.3 创建审批流程app，并发布使其生效")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020032921243123.gif#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_2-2-4-最终效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-最终效果"}},[t._v("#")]),t._v(" 2.2.4 最终效果")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329212456170.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("blockquote",[s("p",[t._v("至此，一个完整的二级审批流程就创建出来了，可以登陆userliu用户发起审批流程，然后分别登陆userhr,userboss去审批")])]),t._v(" "),s("h3",{attrs:{id:"_2-3-发起审批流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-发起审批流程"}},[t._v("#")]),t._v(" 2.3 发起审批流程")]),t._v(" "),s("h4",{attrs:{id:"_2-3-1-先登陆userliu用户发起审批流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-先登陆userliu用户发起审批流程"}},[t._v("#")]),t._v(" 2.3.1 先登陆userliu用户发起审批流程")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329214102207.gif#pic_center",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_2-3-2-分别登陆userhr-userboss用户去审批"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-分别登陆userhr-userboss用户去审批"}},[t._v("#")]),t._v(" 2.3.2 分别登陆userhr,userboss用户去审批")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329214138450.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_2-3-3-查看详细审批流程信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-查看详细审批流程信息"}},[t._v("#")]),t._v(" 2.3.3 查看详细审批流程信息")]),t._v(" "),s("p",[t._v("登陆activiti-admin系统\n"),s("code",[t._v("http://localhost:8080/activiti-admin")]),t._v("(admin/amin)\n1,先修改端口\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329214912492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),t._v("\n在deployment目录下就有已经结束的审批流程详细信息了\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200329214937750.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h2",{attrs:{id:"_3-activiti源码初探"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-activiti源码初探"}},[t._v("#")]),t._v(" 3.Activiti源码初探")]),t._v(" "),s("h3",{attrs:{id:"_3-1-核心模版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-核心模版"}},[t._v("#")]),t._v(" 3.1 核心模版")]),t._v(" "),s("ul",[s("li",[t._v("核心模块\n"),s("ul",[s("li",[t._v("module/activiti-engine 核心引擎")]),t._v(" "),s("li",[t._v("module/activiti-spring Spring集成模块")]),t._v(" "),s("li",[t._v("module/activiti-spring-boot SpringBoot集成模块")]),t._v(" "),s("li",[t._v("module/activiti-rest 对外提供rest api模块")]),t._v(" "),s("li",[t._v("module/activiti-form-engine 表单引擎模块")]),t._v(" "),s("li",[t._v("module/activiti-ldap 集成ldap用户的模块")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-基于源码运行activiti"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-基于源码运行activiti"}},[t._v("#")]),t._v(" 3.2 基于源码运行Activiti")]),t._v(" "),s("ul",[s("li",[t._v("启动activiti-app\n"),s("ul",[s("li",[t._v("$ cd modules/activiti-ui/activiti-app")]),t._v(" "),s("li",[t._v("$ mvn clean tomcat7:run")]),t._v(" "),s("li",[t._v("$ open http://localhost:9999/activiti-app")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-4-搭建基础版demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-搭建基础版demo"}},[t._v("#")]),t._v(" 3.4 搭建基础版Demo")]),t._v(" "),s("p",[t._v("基于maven工程\npom.xml")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  <dependencies>\n    <dependency>\n      <groupId>org.activiti</groupId>\n      <artifactId>activiti-engine</artifactId>\n      <version>6.0.0</version>\n    </dependency>\n\n    <dependency>\n      <groupId>com.h2database</groupId>\n      <artifactId>h2</artifactId>\n      <version>1.3.176</version>\n    </dependency>\n\n    <dependency>\n      <groupId>com.google.guava</groupId>\n      <artifactId>guava</artifactId>\n      <version>28.1-jre</version>\n    </dependency>\n\n    <dependency>\n      <groupId>com.alibaba</groupId>\n      <artifactId>druid</artifactId>\n      <version>1.1.6</version>\n    </dependency>\n\n    <dependency>\n      <groupId>junit</groupId>\n      <artifactId>junit</artifactId>\n      <version>4.11</version>\n      <scope>test</scope>\n    </dependency>\n    <dependency>\n      <groupId>ch.qos.logback</groupId>\n      <artifactId>logback-classic</artifactId>\n      <version>1.1.11</version>\n    </dependency>\n    \n    <dependency>\n      <groupId>com.google.guava</groupId>\n      <artifactId>guava</artifactId>\n      <version>23.0</version>\n    </dependency>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br")])]),s("p",[t._v("单元测试举例：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('private static final Logger logger = LoggerFactory.getLogger(App.class);\nProcessEngineConfiguration processEngineConfiguration = ProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();\n        ProcessEngine processEngine = processEngineConfiguration.buildProcessEngine();\n        String name = processEngine.getName();\n        logger.info("name={}",name);\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"_4-activiti源码深入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-activiti源码深入"}},[t._v("#")]),t._v(" 4.Activiti源码深入")]),t._v(" "),s("h3",{attrs:{id:"_4-1-日志组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-日志组件"}},[t._v("#")]),t._v(" 4.1 日志组件")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409100602996.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_4-1-1-配置流程历史记录级别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-配置流程历史记录级别"}},[t._v("#")]),t._v(" 4.1.1 配置流程历史记录级别")]),t._v(" "),s("ul",[s("li",[t._v("配置HistoryLevel\n"),s("ul",[s("li",[t._v("none：不记录历史流程，性能高，流程结束后不可读取")]),t._v(" "),s("li",[t._v("activiti：归档流程实例和活动实例，流程变量不同步")]),t._v(" "),s("li",[t._v("audit：默认值，在activiti基础上同步变量值，保存表单属性")]),t._v(" "),s("li",[t._v("full：性能较差，记录所有实例和变量细节变化")])])])]),t._v(" "),s("h3",{attrs:{id:"_4-2-activiti流程引擎配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-activiti流程引擎配置"}},[t._v("#")]),t._v(" 4.2 Activiti流程引擎配置")]),t._v(" "),s("div",{staticClass:"language-mermaid line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\nProcessEngine"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngine]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("RepositoryService"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[RepositoryService]")]),t._v("\nProcessEngine"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngine]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("RuntimeService"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[RuntimeService]")]),t._v("\nProcessEngine"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngine]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("xxxService"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[xxxService]")]),t._v("\nProcessEngineConfiguration"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngineConfiguration]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("ProcessEngine"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngine]")]),t._v("\nactiviti.cfg.xml"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[activiti.cfg.xml]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("ProcessEngineConfiguration"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[ProcessEngineConfiguration]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h4",{attrs:{id:"_4-2-1-流程引擎配置类的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-流程引擎配置类的作用"}},[t._v("#")]),t._v(" 4.2.1 流程引擎配置类的作用")]),t._v(" "),s("ul",[s("li",[t._v("ProcessEngineConfiguration\n"),s("ul",[s("li",[t._v("查找并解析xml配置文件activiti.cfg.xml")]),t._v(" "),s("li",[t._v("提供多个静态方法创建配置对象")]),t._v(" "),s("li",[t._v("实现几个基于不同场景的子类，配置方式非常灵活")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-2-2-创建流程引擎配置对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-创建流程引擎配置对象"}},[t._v("#")]),t._v(" 4.2.2 创建流程引擎配置对象")]),t._v(" "),s("p",[t._v("静态方式创建配置对象\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409094131998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h4",{attrs:{id:"_4-2-3-流程引擎配置及对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-3-流程引擎配置及对象"}},[t._v("#")]),t._v(" 4.2.3 流程引擎配置及对象")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409095822887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h3",{attrs:{id:"_4-3-流程运行控制服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-流程运行控制服务"}},[t._v("#")]),t._v(" 4.3 流程运行控制服务")]),t._v(" "),s("ul",[s("li",[t._v("流程实例与执行流\n"),s("ul",[s("li",[t._v("流程实例（ProcessInstance）表示一次工作流业务的数据实体")]),t._v(" "),s("li",[t._v("执行流（Execution）表示流程实例中具体的执行路径")]),t._v(" "),s("li",[t._v("流程实例接口继承执行流")])])]),t._v(" "),s("li",[t._v("流程触发\n"),s("ul",[s("li",[t._v("使用trigger触发ReceiveTask节点")]),t._v(" "),s("li",[t._v("触发信号普获事件signalEventReceived")]),t._v(" "),s("li",[t._v("触发消息普获事件messageEventReceived")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-3-1-任务管理服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-任务管理服务"}},[t._v("#")]),t._v(" 4.3.1 任务管理服务")]),t._v(" "),s("ul",[s("li",[t._v("TaskService\n"),s("ul",[s("li",[t._v("对用户任务UserTask管理和流程的控制")]),t._v(" "),s("li",[t._v("设置用户任务（UserTask）的权限信息（拥有者，候选人，办理人）")]),t._v(" "),s("li",[t._v("针对用户任务添加任务附件，任务评论和事件记录")])])]),t._v(" "),s("li",[t._v("TaskService对Task管理与流程控制\n"),s("ul",[s("li",[t._v("Task对象的创建，删除")]),t._v(" "),s("li",[t._v("查询Task，并驱动Task节点完成执行")]),t._v(" "),s("li",[t._v("Task相关参数变量（variable）设置")])])]),t._v(" "),s("li",[t._v("TaskService设置Task权限信息\n"),s("ul",[s("li",[t._v("候选用户（candidateUser）和候选组（candidateGroup）")]),t._v(" "),s("li",[t._v("指定拥有人（Owner）和办理人（Assignee）")]),t._v(" "),s("li",[t._v("通过claim设置办理人")])])]),t._v(" "),s("li",[t._v("TaskService设置Task附加信息\n"),s("ul",[s("li",[t._v("任务附件（Attachment）创建与查询")]),t._v(" "),s("li",[t._v("任务评论（Comment）创建与查询")]),t._v(" "),s("li",[t._v("事件记录（Event）创建与查询")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-3-2-身份管理服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-身份管理服务"}},[t._v("#")]),t._v(" 4.3.2 身份管理服务")]),t._v(" "),s("ul",[s("li",[t._v("IdentityService\n"),s("ul",[s("li",[t._v("管理用户（User）")]),t._v(" "),s("li",[t._v("管理用户组（Group）")]),t._v(" "),s("li",[t._v("用户与用户组的关系（Membership）")])])])]),t._v(" "),s("div",{staticClass:"language-mermaid line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\nIdentityService"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[IdentityService]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("CommandExecutor"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[CommandExecutor]")]),t._v("\nCommandExecutor"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[CommandExecutor]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("UserEntityManager"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[UserEntityManager]")]),t._v("\nUserEntityManager"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[UserEntityManager]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("UserDataManager"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("MybatisUserDataManager"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[UserDataManager:MybatisUserDataManager]")]),t._v("\nUserDataManager"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("MybatisUserDataManager"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[UserDataManager:MybatisUserDataManager]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("DbSqlSession"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[DbSqlSession]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h4",{attrs:{id:"_4-3-3-表单管理服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-3-表单管理服务"}},[t._v("#")]),t._v(" 4.3.3 表单管理服务")]),t._v(" "),s("ul",[s("li",[t._v("FormService\n"),s("ul",[s("li",[t._v("解析流程定义中表单项的配置")]),t._v(" "),s("li",[t._v("提交表单的方式驱动用户节点流转")]),t._v(" "),s("li",[t._v("获取自定义外部表单key")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-3-4-历史管理服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-4-历史管理服务"}},[t._v("#")]),t._v(" 4.3.4 历史管理服务")]),t._v(" "),s("ul",[s("li",[t._v("HistoryService\n"),s("ul",[s("li",[t._v("管理流程实例结束后的历史数据")]),t._v(" "),s("li",[t._v("构建历史数据的查询对象")]),t._v(" "),s("li",[t._v("根据流程实例ID删除流程历史数据")])])]),t._v(" "),s("li",[t._v("HistoryService历史数据实体")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("历史数据实体")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("HistoryProcessInstance")]),t._v(" "),s("td",[t._v("历史流程实例实体类")])]),t._v(" "),s("tr",[s("td",[t._v("HistoryVariableInstance")]),t._v(" "),s("td",[t._v("流程或任务变量值的实体")])]),t._v(" "),s("tr",[s("td",[t._v("HistoryActivityInstance")]),t._v(" "),s("td",[t._v("单个活动节点执行的信息")])]),t._v(" "),s("tr",[s("td",[t._v("HistoryTaskInstance")]),t._v(" "),s("td",[t._v("用户任务实例的信息")])]),t._v(" "),s("tr",[s("td",[t._v("HistoryDetail")]),t._v(" "),s("td",[t._v("历史流程活动任务详细信息")])])])]),t._v(" "),s("ul",[s("li",[t._v("HistoryService构建历史查询对象\n"),s("ul",[s("li",[t._v("create【历史数据实体】Query")]),t._v(" "),s("li",[t._v("createNative【历史数据实体】Query")]),t._v(" "),s("li",[t._v("createProcessInstanceHistoryLogQuery")])])]),t._v(" "),s("li",[t._v("HistoryService删除历史操作\n"),s("ul",[s("li",[t._v("deleteHistoryProcessInstance")]),t._v(" "),s("li",[t._v("deleteHistoryTaskInstance")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-3-5-管理服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-5-管理服务"}},[t._v("#")]),t._v(" 4.3.5 管理服务")]),t._v(" "),s("ul",[s("li",[t._v("管理服务 ManagementService\n"),s("ul",[s("li",[t._v("数据库相关通用操作\n"),s("ul",[s("li",[t._v("查询表结构元数据（TableMetaData）")]),t._v(" "),s("li",[t._v("通用表查询（TablePageQuery）")]),t._v(" "),s("li",[t._v("执行自定义的Sql查询（executeCustomSql）")])])]),t._v(" "),s("li",[t._v("执行流程引擎命令（Command）")]),t._v(" "),s("li",[t._v("job任务管理")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("工作查询对象")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("JobQuery")]),t._v(" "),s("td",[t._v("查询一般工作")])]),t._v(" "),s("tr",[s("td",[t._v("TimerJobQuery")]),t._v(" "),s("td",[t._v("查询定时工作")])]),t._v(" "),s("tr",[s("td",[t._v("SuspendedJobQuery")]),t._v(" "),s("td",[t._v("查询中断工作")])]),t._v(" "),s("tr",[s("td",[t._v("DeadLetterJobQuery")]),t._v(" "),s("td",[t._v("查询无法执行的工作")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-3-6-动态流程定义服务dynamicbpmnservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-6-动态流程定义服务dynamicbpmnservice"}},[t._v("#")]),t._v(" 4.3.6 动态流程定义服务DynamicBpmnService")]),t._v(" "),s("h2",{attrs:{id:"_5-异常策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-异常策略"}},[t._v("#")]),t._v(" 5.异常策略")]),t._v(" "),s("ul",[s("li",[t._v("ActivitiException")]),t._v(" "),s("li")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("异常名称")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ActivitiWrongDbException")]),t._v(" "),s("td",[t._v("引擎与数据库版本不匹配")])]),t._v(" "),s("tr",[s("td",[t._v("ActivitiOptimisticLockingException")]),t._v(" "),s("td",[t._v("并发导致乐观锁异常")])]),t._v(" "),s("tr",[s("td",[t._v("ActivitiClassLoadingException")]),t._v(" "),s("td",[t._v("加载类异常")])]),t._v(" "),s("tr",[s("td",[t._v("ActivitiObjectNotFountException")]),t._v(" "),s("td",[t._v("操作对象不存在")])]),t._v(" "),s("tr",[s("td",[t._v("ActivitiLegalArgumentException")]),t._v(" "),s("td",[t._v("非法的参数")])]),t._v(" "),s("tr",[s("td",[t._v("ActivitiTaskAlreadyClaimedException")]),t._v(" "),s("td",[t._v("任务被重新声明代理人")])]),t._v(" "),s("tr",[s("td",[t._v("BpmnError")]),t._v(" "),s("td",[t._v("定义业务异常，控制流程")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409105844934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h2",{attrs:{id:"_6-数据模型设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-数据模型设计"}},[t._v("#")]),t._v(" 6.数据模型设计")]),t._v(" "),s("h3",{attrs:{id:"_6-1-数据表分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-数据表分类"}},[t._v("#")]),t._v(" 6.1 数据表分类")]),t._v(" "),s("ul",[s("li",[t._v("ACT_GE_*   通用数据表（GE表示General）\n"),s("ul",[s("li",[t._v("ACT_GE_PROPERTY   属性表（保存\t流程引擎的kv健值属性）")]),t._v(" "),s("li",[t._v("ACT_GE_BYTEARRAY 资源表（存储流程定义相关的资源）")])])]),t._v(" "),s("li",[t._v("ACT_RE_*   流程定义存储表（RE表示Repository）\n"),s("ul",[s("li",[t._v("ACT_RE_DEPLOYMENT 流程部署记录表\n"),s("ul",[s("li",[t._v("ID_ 主键")]),t._v(" "),s("li",[t._v("NAME_ 名称")]),t._v(" "),s("li",[t._v("CATEGORY 分类")]),t._v(" "),s("li",[t._v("TENANT_ID 多租户标志")]),t._v(" "),s("li",[t._v("DEPLOY_TIME_ 部署时间")]),t._v(" "),s("li",[t._v("KEY_ 标志key")]),t._v(" "),s("li",[t._v("ENGINE_VERSION_ 兼容版本")])])]),t._v(" "),s("li",[t._v("ACT_RE_PROCDEF 流程定义信息表\n"),s("ul",[s("li",[t._v("DEPLOYMENT_ID_ 关联部署ID")]),t._v(" "),s("li",[t._v("RESOURCE_NAME_ 流程定义资源名称")]),t._v(" "),s("li",[t._v("DGRM_RESOURCE_NAME_ 流程图片资源名称")]),t._v(" "),s("li",[t._v("HAS_START_FORM_KEY_ 是否存在开始表单标志")]),t._v(" "),s("li",[t._v("HAS_GRAPHICAL_NOTATION_ 是否有图形信息")]),t._v(" "),s("li",[t._v("SUSPENSION_STATE_ 挂起状态 1正常，2挂起")])])]),t._v(" "),s("li",[t._v("ACT_RE_MODEL 模型信息表（用于web设计器）")]),t._v(" "),s("li",[t._v("ACT_PROCDEF_INFO 流程定义动态改变信息表")])])]),t._v(" "),s("li",[t._v("ACT_ID_*   身份信息表（ID表示Identity）\n"),s("ul",[s("li",[t._v("ACT_ID_USER 用户的基本信息")]),t._v(" "),s("li",[t._v("ACT_ID_INFO 用户的扩展信息\n"),s("ul",[s("li",[t._v("USER_ID_ 关联用户ID")]),t._v(" "),s("li",[t._v("TYPE_ 类型")]),t._v(" "),s("li",[t._v("KEY_ 属性名")]),t._v(" "),s("li",[t._v("VALUE_ 属性值")]),t._v(" "),s("li",[t._v("PASSWORD_ 密码（并没使用）")]),t._v(" "),s("li",[t._v("PARENT_ID_ 上级关联")])])]),t._v(" "),s("li",[t._v("ACT_ID_GROUP 群组")]),t._v(" "),s("li",[t._v("ACT_ID_MEMBERSHIP 用户与群组关系")])])]),t._v(" "),s("li",[t._v("ACT_RU_*   运行时数据库表（RU表示RunTime）\n"),s("ul",[s("li",[t._v("ACT_RU_EXECUTION  流程实例与分支执行信息")]),t._v(" "),s("li",[t._v("ACT_RU_TASK 用户任务信息")]),t._v(" "),s("li",[t._v("ACT_RU_VARIABLE 变量信息")]),t._v(" "),s("li",[t._v("ACT_RU_IDENTITYLINL 参与者相关信息")]),t._v(" "),s("li",[t._v("ACT_RU_EVENT_SUBSCR 事件监听表")]),t._v(" "),s("li",[t._v("ACT_RU_JOB 作业表")]),t._v(" "),s("li",[t._v("ACT_RU_TIMER_JOB 定时器表")]),t._v(" "),s("li",[t._v("ACT_RU_SUSPENDED_JOB 暂停作业表")]),t._v(" "),s("li",[t._v("ACT_RU_DEADLETTER_JOB 死信表")])])]),t._v(" "),s("li",[t._v("ACT_HI_*   历史数据库表（HI表示History）\n"),s("ul",[s("li",[t._v("ACT_HI_PROCINST 历史流程实例表")]),t._v(" "),s("li",[t._v("ACT_HI_ACTINST 历史节点信息表")]),t._v(" "),s("li",[t._v("ACT_HI_TASKINST 历史任务表")]),t._v(" "),s("li",[t._v("ACT_HI_VARINST 历史变量")]),t._v(" "),s("li",[t._v("ACT_HI_IDENTITYLINK 历史参与者")]),t._v(" "),s("li",[t._v("ACT_HI_DETAIL 历史变更")]),t._v(" "),s("li",[t._v("ACT_HI_ATTACHMENT 附件")]),t._v(" "),s("li",[t._v("ACT_HI_COMMENT 评论")]),t._v(" "),s("li",[t._v("ACT_EVT_LOG  事件日志")])])])]),t._v(" "),s("h3",{attrs:{id:"_6-2-数据库建表语句"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-数据库建表语句"}},[t._v("#")]),t._v(" 6.2 数据库建表语句")]),t._v(" "),s("ul",[s("li",[t._v("Mysql建表语句\n"),s("ul",[s("li",[t._v("核心引擎activiti.mysql.create.engine.sql")]),t._v(" "),s("li",[t._v("历史数据activiti.mysql.create.history.sql")]),t._v(" "),s("li",[t._v("身份信息activiti.mysql.create.identity.sql")])])]),t._v(" "),s("li",[t._v("Mysql删表语句\n"),s("ul",[s("li",[t._v("核心引擎activiti.mysql.drop.engine.sql")]),t._v(" "),s("li",[t._v("历史数据activiti.mysql.drop.history.sql")]),t._v(" "),s("li",[t._v("身份信息activiti.mysql.drop.identity.sql")])])])]),t._v(" "),s("h2",{attrs:{id:"_7-bpmn-2-0-business-process-model-and-notation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-bpmn-2-0-business-process-model-and-notation"}},[t._v("#")]),t._v(" 7.BPMN 2.0（Business Process Model And Notation）")]),t._v(" "),s("h3",{attrs:{id:"_7-1-bpmn-2-0概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-bpmn-2-0概述"}},[t._v("#")]),t._v(" 7.1 BPMN 2.0概述")]),t._v(" "),s("ul",[s("li",[t._v("是一套业务流程模型与符号建模标准")]),t._v(" "),s("li",[t._v("精准的执行语义来描述元素的操作")]),t._v(" "),s("li",[t._v("以xml为载体，以符号可视化业务")])]),t._v(" "),s("div",{staticClass:"language-mermaid line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\nBPMN2.0元素"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[BPMN2.0元素]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 流对象FlowObjects"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[流对象FlowObjects]")]),t._v("\nBPMN2.0元素"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[BPMN2.0元素]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 连接对象ConnectingObject"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[连接对象ConnectingObject]")]),t._v("\nBPMN2.0元素"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[BPMN2.0元素]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 数据Data"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[Data]")]),t._v("\nBPMN2.0元素"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[BPMN2.0元素]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 泳道Swimlanes"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[泳道Swimlanes]")]),t._v("\nBPMN2.0元素"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[BPMN2.0元素]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 描述对象Artifacts"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[描述对象Artifacts]")]),t._v("\n\n流对象FlowObjects"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[流对象FlowObjects]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("活动Activities"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[活动Activities ,UserTask ,ServiceTask...]")]),t._v("\n流对象FlowObjects"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[流对象FlowObjects]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("事件Events"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[事件Events ,StartEvent,EndEvent...]")]),t._v("\n流对象FlowObjects"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[流对象FlowObjects]")]),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v("网关Gateways"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[网关GateWays ,ExclusiveGateWays...]")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409114336899.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),t._v(" "),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409114345208.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),t._v("\n例子：\n"),s("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200409123500772.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JhaW9mY2hhbw==,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),s("h2",{attrs:{id:"标题附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#标题附录"}},[t._v("#")]),t._v(" 标题附录：")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://www.mossle.com/docs/activiti/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Activiti5.16中文用户手册"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://www.activiti.org/javadocs/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Activiti javadocs"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://www.activiti.org/quick-start",target:"_blank",rel:"noopener noreferrer"}},[t._v("Activiti经典入门Demo"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);