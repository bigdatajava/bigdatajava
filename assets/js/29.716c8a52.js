(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{371:function(n,s,e){"use strict";e.r(s);var a=e(1),t=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v("我们的业务场景是根据父栏目id查询所有子栏目信息，这里提供了几种根据父id查询子id集合的一些方法，cms_channel表名，channel_id主键id，#channelId:VARCHAR#参数数据类型，总结下：\n"),s("strong",[n._v("oracle数据库IBatis写法")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("select channel_id from cms_channel  start with parent_id =#channelId:VARCHAR#\n\t\t\tconnect by prior channel_id=parent_id \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[s("strong",[n._v("Mysql数据库IBatis写法")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("SELECT c.channel_id FROM\n\t\t\t\t\t(SELECT @id idlist, @lv := @lv + 1 lv,\n\t\t\t\t\t\t(SELECT @id := GROUP_CONCAT(channel_id SEPARATOR ',') FROM cms_channel WHERE FIND_IN_SET(parent_id, @id)) sub \n\t\t\t\t\t\tFROM cms_channel, (SELECT @id := #channelId:VARCHAR#, @lv := 0) vars WHERE @id IS NOT NULL\n\t\t\t\t\t) t, cms_channel c \n\t\t\t\tWHERE FIND_IN_SET(c.parent_id, t.idlist)\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[s("strong",[n._v("递归查询函数写法")]),n._v(" "),s("em",[n._v("函数定义：")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("DROP function IF EXISTS getSubChannelByPId;\ncreate function getSubChannelByPId(pid VARCHAR(32))\nreturns varchar(4000)\nBEGIN\nDECLARE oTemp VARCHAR(4000);\nDECLARE oTempChild VARCHAR(4000);\nSET oTemp = '';\nSET oTempChild = CAST(pid AS CHAR);\nWHILE oTempChild IS NOT NULL\nDO\nSET oTemp = CONCAT(oTemp,',',oTempChild);\nSELECT GROUP_CONCAT(channel_id) INTO oTempChild FROM cms_channel WHERE FIND_IN_SET(parent_id,oTempChild) > 0;\nEND WHILE;\nRETURN oTemp;\nEND\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br")])]),s("p",[s("em",[n._v("IBatis写法")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("select CHANNEL_ID from cms_channel where FIND_IN_SET(c.parent_id,getSubChannelByPId(#channelId:VARCHAR#))\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("p",[n._v("​")])])}),[],!1,null,null,null);s.default=t.exports}}]);