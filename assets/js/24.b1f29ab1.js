(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{372:function(a,s,n){"use strict";n.r(s);var t=n(1),e=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"创建模拟表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建模拟表"}},[a._v("#")]),a._v(" 创建模拟表")]),a._v(" "),s("blockquote",[s("p",[a._v("表关系\na.id=b.a_id (one->one)\nb.id=c.b_id (one->more)\nb表相当于AC表关系的纽带")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table a\n(\n    id      varchar(255) null,\n    time    date         null,\n    country varchar(255) null,\n    bu      varchar(255) null\n);\nINSERT INTO a (id, time, country, bu) VALUES ('a1', null, 'JP', 'DCG');\nINSERT INTO .a (id, time, country, bu) VALUES ('a2', null, 'JP', 'DCG');\nINSERT INTO a (id, time, country, bu) VALUES ('a3', null, 'JP', 'DCG');\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table b\n(\n    id   varchar(255) null,\n    a_id varchar(255) null\n);\nINSERT INTO b (id, a_id) VALUES ('b1', 'a1');\nINSERT INTO b (id, a_id) VALUES ('b2', 'a2');\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("create table c\n(\n    id     varchar(255) null,\n    b_id   varchar(255) null,\n    time   date         null,\n    status varchar(255) null\n);\nINSERT INTO c (id, b_id, time, status) VALUES ('c1', 'b1', '2020-11-01', 'Approved');\nINSERT INTO c (id, b_id, time, status) VALUES ('c2', 'b1', '2020-11-03', null);\nINSERT INTO c (id, b_id, time, status) VALUES ('c3', 'b2', '2020-11-01', 'Approved');\nINSERT INTO c (id, b_id, time, status) VALUES ('c4', 'b2', '2020-11-04', '');\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("h2",{attrs:{id:"业务需求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#业务需求"}},[a._v("#")]),a._v(" 业务需求")]),a._v(" "),s("blockquote",[s("p",[a._v("A表关联的C表数据，只有一条数据是c.status='Approved'\n将A表满足bu=\"DCG\" and country=\"JP\"的数据，关联的C表中c.status='Approved'的那一条数据的c.time加上90天赋值给a.time")])]),a._v(" "),s("h2",{attrs:{id:"sql实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sql实现"}},[a._v("#")]),a._v(" SQL实现")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("UPDATE  a a1\n    LEFT JOIN b b1\n    on a1.id = b1.a_id\n    LEFT JOIN (SELECT * FROM c) c1\n    on b1.id = c1.b_id\nset a1.time=DATE_ADD(c1.time , INTERVAL 90  DAY)\nwhere a1.bu='DCG' and country='JP' and a1.time is null;\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);