(window.webpackJsonp=window.webpackJsonp||[]).push([[301],{645:function(s,t,a){"use strict";a.r(t);var e=a(1),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"安装邮件依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装邮件依赖"}},[s._v("#")]),s._v(" 安装邮件依赖")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo apt-get install curl openssh-server ca-certificates postfix\\\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"下载gitlab安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载gitlab安装包"}},[s._v("#")]),s._v(" 下载gitLab安装包")]),s._v(" "),t("p",[s._v("地址："),t("code",[s._v("https://packages.gitlab.com/gitlab/gitlab-ce?page=1")])]),s._v(" "),t("h2",{attrs:{id:"安装gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装gitlab"}},[s._v("#")]),s._v(" 安装Gitlab")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo dpkg -i gitlab-ce_xxx-ce.0_amd64.deb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"修改服务器地址-改成自己的ip-端口-端口不写默认为80-类似-external-url-http-192-168-xxx-xxx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改服务器地址-改成自己的ip-端口-端口不写默认为80-类似-external-url-http-192-168-xxx-xxx"}},[s._v("#")]),s._v(" 修改服务器地址，改成自己的IP:端口（端口不写默认为80），类似 external_url 'http://192.168.xxx.xxx'")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo vim /etc/gitlab/gitlab.rb\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"启动sshd和postfix服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动sshd和postfix服务"}},[s._v("#")]),s._v(" 启动sshd和postfix服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("service sshd start\nservice postfix start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"重启服务-一行一行执行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启服务-一行一行执行"}},[s._v("#")]),s._v(" 重启服务（一行一行执行）")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo gitlab-ctl reconfigure\nsudo gitlab-ctl status\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"修改用户密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改用户密码"}},[s._v("#")]),s._v(" 修改用户密码")]),s._v(" "),t("blockquote",[t("p",[s._v("!!!使用root用户sudo su")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cd /opt/gitlab/bin\ngitlab-rails console -e production\nuser.password = 'pwd'\nuser.password_confirmation = 'pwd'\nuser.save!\nexit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"开放端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放端口"}},[s._v("#")]),s._v(" 开放端口")]),s._v(" "),t("p",[s._v("$ iptables -I INPUT -p tcp --dport 80 -j ACCEPT\n中间的80为所需要开放的端口\n$ iptables-save\n保存，如果此时服务器重启，上述规则就没有了\n持久化保存规则\n安装\n$ sudo apt-get install iptables-persistent\n$ sudo netfilter-persistent save\n$ sudo netfilter-persistent reload")]),s._v(" "),t("h2",{attrs:{id:"访问gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问gitlab"}},[s._v("#")]),s._v(" 访问gitLab")]),s._v(" "),t("p",[s._v("localhost\nlocalhost:80")]),s._v(" "),t("p",[s._v("1）如果本地电脑可以访问，其它电脑无法访问，可能是防火墙限制，需要放行访问端口\n2）如果页面显示502，如下图，则给目录授权：chmod  -R   755  /var/logs/gitlab/\n3）Gitlab文档：https://docs.gitlab.com/ee/topics/set_up_organization.html")]),s._v(" "),t("h2",{attrs:{id:"附录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附录"}},[s._v("#")]),s._v(" 附录")]),s._v(" "),t("ol",[t("li",[s._v("https://www.cnblogs.com/youzhibing/p/12572598.html")]),s._v(" "),t("li",[s._v("git 公钥生成")])]),s._v(" "),t("blockquote",[t("p",[s._v('1、配置用户名\ngit config --global user.name "xxx"')])]),s._v(" "),t("p",[s._v("2、配置邮箱")]),s._v(" "),t("p",[s._v('git config --global user.email "xxxx@qq.com"')]),s._v(" "),t("p",[s._v("3、查看配置")]),s._v(" "),t("p",[s._v("git config -l")]),s._v(" "),t("p",[s._v("4、生成公钥和私钥")]),s._v(" "),t("p",[s._v('ssh-keygen -t rsa -C "xxxx@qq.com"')]),s._v(" "),t("p",[s._v("5、查看公钥")]),s._v(" "),t("p",[s._v("cat ~/.ssh/id_rsa.pub")]),s._v(" "),t("p",[s._v("6、复制步骤4显示出来公钥，然后去网站中设置SSH Keys即可")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/nylg/picture/raw/master/git/1629798660(1).jpg",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);